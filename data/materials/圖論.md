# 圖論簡介

圖論（Graph Theory）是數學的一個分支，主要研究圖（Graph）這種由頂點（或稱節點）和連接這些頂點的邊組成的結構。它提供了一種強大的工具來建模和解決各種現實世界的問題，從社交網絡分析、路徑規劃到電路設計和生物信息學，應用無處不在。本章將介紹圖論的核心概念、基本術語、表示方法及其與相關領域的聯繫。

-----

### 核心概念與定義

#### 什麼是圖？

圖（Graph）是由一組頂點（Vertices或Nodes）和一組邊（Edges或Links）組成的數學結構。
在形式上，一個圖 $G$ 通常表示為一個有序對 $G = (V, E)$，其中：
*   $V$ 是一個非空的有限集合，其元素稱為**頂點**。
*   $E$ 是一個有限集合，其元素稱為**邊**，每條邊連接 $V$ 中的一對頂點。

**例子：**
想像一個小型社交網絡，其中每個人都是一個頂點，而兩個人之間如果互為朋友，則有一條邊連接他們。
*   $V = \{A, B, C, D, E\}$ (代表五個朋友)
*   $E = \{\{A, B\}, \{A, C\}, \{B, D\}, \{C, D\}, \{D, E\}\}$ (代表朋友關係)
這就是一個圖的例子。

**與相鄰概念的關聯：**
圖是離散數學的核心概念之一，也是許多演算法（例如網路流量、最短路徑）的基礎。它是對現實世界中各種關係和連接的抽象建模。

#### 圖的種類

圖根據其性質可分為多種類型。了解這些分類對於選擇合適的演算法和分析方法至關重要。

##### 無向圖與有向圖

*   **定義：**
    *   **無向圖（Undirected Graph）：** 邊沒有方向，表示兩個頂點之間是雙向連接。如果存在一條邊 $\{u, v\}$，則從 $u$ 到 $v$ 和從 $v$ 到 $u$ 是等效的。在無向圖中，邊通常表示為無序對 $\{u, v\}$ 或 $(u, v)$。
    *   **有向圖（Directed Graph 或 Digraph）：** 邊具有方向，表示連接是單向的。如果存在一條從 $u$ 到 $v$ 的邊，通常表示為有序對 $(u, v)$，它與從 $v$ 到 $u$ 的邊 $(v, u)$ 是不同的。
*   **例子：**
    *   **無向圖：** 社交網絡中的「朋友」關係（如果 $A$ 是 $B$ 的朋友，則 $B$ 也是 $A$ 的朋友）。
    *   **有向圖：** Twitter 上的「追蹤」關係（$A$ 追蹤 $B$ 不代表 $B$ 追蹤 $A$），或從城市 $A$ 到城市 $B$ 的單行道。
*   **與相鄰概念的關聯：**
    有無向性會影響路徑、連通性、迴圈等概念的定義，以及度數（有向圖需區分入度與出度）的計算。

##### 加權圖與無權圖

*   **定義：**
    *   **無權圖（Unweighted Graph）：** 邊沒有任何附加值。邊的存在本身就代表了連接。
    *   **加權圖（Weighted Graph）：** 每條邊都帶有一個數值，稱為「權重」（Weight）。權重可以代表距離、成本、容量、時間等。
*   **例子：**
    *   **無權圖：** 簡單的朋友關係網絡，只關心誰和誰是朋友。
    *   **加權圖：** 地圖上的城市間道路，邊的權重可以是兩城市間的距離或行車時間。
*   **與相鄰概念的關聯：**
    在加權圖上，許多演算法（如最短路徑演算法 Dijkstra、Floyd-Warshall）需要考慮權重，而在無權圖上則主要關注邊的數量（例如 BFS 求最短邊數路徑）。

##### 簡單圖與多重圖

*   **定義：**
    *   **簡單圖（Simple Graph）：** 不包含「自環」（Loop，連接頂點自身的邊）且任意兩個頂點之間最多只有一條邊（無多重邊）。
    *   **多重圖（Multigraph）：** 允許兩個頂點之間有多條邊（多重邊）。如果也允許自環，則稱為「偽圖」（Pseudograph）。
*   **例子：**
    *   **簡單圖：** 大多數數學或演算法問題預設處理的圖。
    *   **多重圖：** 兩城市間有多條不同路線的交通網絡圖。
*   **與相鄰概念的關聯：**
    多數圖論演算法是在簡單圖的假設下設計的，處理多重圖時可能需要調整或特別說明。

##### 稀疏圖與稠密圖

*   **定義：**
    *   **稀疏圖（Sparse Graph）：** 邊的數量 $|E|$ 相對頂點數 $|V|$ 較少。具體來說，如果 $|E|$ 接近 $O(|V|)$，則通常被認為是稀疏圖。
    *   **稠密圖（Dense Graph）：** 邊的數量 $|E|$ 相對頂點數 $|V|$ 較多。具體來說，如果 $|E|$ 接近 $O(|V|^2)$，則通常被認為是稠密圖。
    *   一個包含 $N$ 個頂點的無向簡單圖，最多有 $\frac{N(N-1)}{2}$ 條邊。
*   **例子：**
    *   **稀疏圖：** 絕大多數的真實世界網絡，例如人際關係網絡、互聯網拓撲。
    *   **稠密圖：** 在一個小組裡，每個人都認識其他人（完全圖）。
*   **與相鄰概念的關聯：**
    圖的稀疏性或稠密性對於選擇圖的表示方法（鄰接矩陣 vs. 鄰接列表）以及演算法的效率（時間複雜度）有顯著影響。

#### 基本術語

##### 頂點與邊

*   **頂點（Vertex / Node）：** 圖的基本組成單元。在實際應用中，它們可以代表人、城市、網頁、電腦等實體。
*   **邊（Edge / Link）：** 連接兩個頂點的線。在實際應用中，它們可以代表關係、道路、超連結、通信線路等連接。

##### 度數

*   **定義：**
    *   **無向圖的度數（Degree）：** 頂點 $v$ 的度數 $\text{deg}(v)$ 是與 $v$ 相連接的邊的數量。自環會計數兩次。
    *   **有向圖的入度（In-degree）：** 頂點 $v$ 的入度 $\text{in-deg}(v)$ 是指向 $v$ 的邊的數量。
    *   **有向圖的出度（Out-degree）：** 頂點 $v$ 的出度 $\text{out-deg}(v)$ 是從 $v$ 指出的邊的數量。
*   **例子：**
    對於上面的社交網絡圖 $G = (V, E)$：
    $V = \{A, B, C, D, E\}$
    $E = \{\{A, B\}, \{A, C\}, \{B, D\}, \{C, D\}, \{D, E\}\}$
    *   $\text{deg}(A) = 2$ (邊 $\{A, B\}, \{A, C\}$)
    *   $\text{deg}(B) = 2$ (邊 $\{A, B\}, \{B, D\}$)
    *   $\text{deg}(C) = 2$ (邊 $\{A, C\}, \{C, D\}$)
    *   $\text{deg}(D) = 3$ (邊 $\{B, D\}, \{C, D\}, \{D, E\}$)
    *   $\text{deg}(E) = 1$ (邊 $\{D, E\}$)
*   **與相鄰概念的關聯：**
    度數是衡量頂點重要性或連接性的基本指標。**握手定理**指出，在任何無向圖中，所有頂點度數之和等於邊數的兩倍。

##### 路徑與迴圈

*   **定義：**
    *   **路徑（Path）：** 在圖中從一個頂點到另一個頂點的頂點序列，其中序列中相鄰的頂點之間都有邊連接。路徑的長度是其包含的邊的數量。如果路徑中所有頂點都互不相同，則稱為**簡單路徑（Simple Path）**。
    *   **迴圈（Cycle）：** 一條路徑，其起點和終點是同一個頂點，且除了起點/終點外，其他頂點都不重複。迴圈的長度是其包含的邊的數量。
*   **例子：**
    繼續使用上面的社交網絡圖：
    *   路徑從 $A$ 到 $E$：$A \to C \to D \to E$。這是一條長度為 3 的簡單路徑。
    *   迴圈：$A \to C \to D \to B \to A$。這是一個長度為 4 的迴圈。
*   **與相鄰概念的關聯：**
    路徑和迴圈是理解圖的遍歷、連通性和最短路徑問題的基礎。

##### 連通性與連通分量

*   **定義：**
    *   **連通圖（Connected Graph）：** 在無向圖中，如果任意兩個頂點之間都存在一條路徑，則稱該圖是連通的。
    *   **連通分量（Connected Component）：** 無向圖中的一個連通子圖，它不是任何其他更大連通子圖的子圖。簡單來說，就是圖中最大的一個連通塊。
    *   **強連通圖（Strongly Connected Graph）：** 在有向圖中，如果對於任意兩個頂點 $u$ 和 $v$，都存在一條從 $u$ 到 $v$ 的路徑，**且**存在一條從 $v$ 到 $u$ 的路徑，則稱該圖是強連通的。
    *   **弱連通圖（Weakly Connected Graph）：** 在有向圖中，如果將所有有向邊替換為無向邊後，結果圖是連通的，則稱原圖是弱連通的。
*   **例子：**
    *   如果一個社交網絡中所有人都互相認識（可能間接認識），則該圖是連通的。
    *   如果社交網絡由幾個獨立的群體組成，那麼每個群體就是一個連通分量。
*   **與相鄰概念的關聯：**
    連通性是衡量網絡穩定性和整體結構的重要指標。圖的遍歷演算法（DFS, BFS）常用於找出連通分量。

-----

### 典型例子與圖的表示法

在計算機中，圖的表示方式直接影響到對圖進行操作的演算法效率。常用的表示方法有鄰接矩陣和鄰接列表。

#### 鄰接矩陣 (Adjacency Matrix)

*   **定義：**
    對於一個含有 $N$ 個頂點的圖 $G=(V, E)$，鄰接矩陣 $A$ 是一個 $N \times N$ 的二維矩陣。
    *   對於無向圖：如果頂點 $i$ 和頂點 $j$ 之間有邊，則 $A_{ij} = A_{ji} = 1$；否則 $A_{ij} = A_{ji} = 0$。如果圖是加權的，則 $A_{ij}$ 存儲邊的權重。
    *   對於有向圖：如果存在一條從頂點 $i$ 到頂點 $j$ 的邊，則 $A_{ij} = 1$；否則 $A_{ij} = 0$。加權圖類似。
*   **例子：**
    考慮一個無向圖，頂點 $V = \{0, 1, 2, 3\}$，邊 $E = \{\{0, 1\}, \{0, 2\}, \{1, 2\}, \{2, 3\}\}$。
    其鄰接矩陣為：
    $$
    A = \begin{pmatrix}
    0 & 1 & 1 & 0 \\
    1 & 0 & 1 & 0 \\
    1 & 1 & 0 & 1 \\
    0 & 0 & 1 & 0
    \end{pmatrix}
    $$
*   **與相鄰概念的關聯：**
    *   **優點：** 查詢兩個頂點之間是否有邊或邊的權重非常快速（$O(1)$）；對於稠密圖，空間利用率較高；方便進行矩陣運算來解決某些圖論問題。
    *   **缺點：** 無論圖有多少邊，空間複雜度總是 $O(|V|^2)$，對於稀疏圖會浪費大量空間；遍歷一個頂點的所有鄰居需要 $O(|V|)$ 時間。

#### 鄰接列表 (Adjacency List)

*   **定義：**
    鄰接列表是一種更有效表示稀疏圖的方法。它為圖中的每個頂點維護一個列表，列出所有與該頂點相鄰的頂點。
    *   對於無向圖：如果頂點 $i$ 和頂點 $j$ 之間有邊，則 $j$ 會出現在 $i$ 的鄰接列表中，同時 $i$ 會出現在 $j$ 的鄰接列表中。
    *   對於有向圖：如果存在一條從頂點 $i$ 到頂點 $j$ 的邊，則 $j$ 會出現在 $i$ 的鄰接列表中。
    *   加權圖可以在列表中存儲成對的值（鄰居頂點, 權重）。
*   **例子：**
    繼續使用上面的無向圖，頂點 $V = \{0, 1, 2, 3\}$，邊 $E = \{\{0, 1\}, \{0, 2\}, \{1, 2\}, \{2, 3\}\}$。
    其鄰接列表為：
    ```
    0: [1, 2]
    1: [0, 2]
    2: [0, 1, 3]
    3: [2]
    ```
*   **與相鄰概念的關聯：**
    *   **優點：** 空間複雜度是 $O(|V| + |E|)$，對於稀疏圖非常高效；遍歷一個頂點的所有鄰居非常快速，時間複雜度為 $O(\text{deg}(v))$。
    *   **缺點：** 查詢兩個頂點之間是否有邊需要遍歷列表（在最壞情況下 $O(|V|)$ 時間）；不方便進行某些圖的矩陣運算。

#### 邊列表 (Edge List)

*   **定義：**
    直接將圖中所有的邊列出，每條邊通常表示為一個元組 $(u, v)$ 或 $(u, v, w)$（如果為加權圖）。
*   **例子：**
    上面的無向圖，邊列表為：
    ```
    [(0, 1), (0, 2), (1, 2), (2, 3)]
    ```
*   **與相鄰概念的關聯：**
    *   **優點：** 最簡單直觀的表示方式，適合讀取和處理邊。
    *   **缺點：** 對於許多圖論演算法，單獨的邊列表操作起來效率較低，通常需要與其他資料結構（如並查集）結合使用。

-----

### 與相鄰概念的關聯

圖論並非孤立的學科，它與計算機科學、數學和工程學的許多其他領域有著深刻的聯繫。

*   **資料結構與演算法：**
    圖的表示法（鄰接矩陣、鄰接列表）本身就是重要的資料結構。基於這些表示，圖遍歷（深度優先搜尋 DFS、廣度優先搜尋 BFS）、最短路徑（Dijkstra 演算法、Bellman-Ford 演算法、Floyd-Warshall 演算法）、最小生成樹（Prim 演算法、Kruskal 演算法）、網路流等眾多演算法都建立在圖論的基礎上。
*   **離散數學：**
    圖論是離散數學的一個核心分支，與集合論、組合數學、數理邏輯等緊密相連。例如，握手定理、歐拉迴路、哈密頓迴路等都是重要的離散數學概念。
*   **網路科學：**
    現代網路科學（Network Science）研究的核心就是圖論。社交網絡、交通網絡、計算機網絡、生物網絡等都可以抽象為圖，利用圖論工具分析網絡的結構、傳播特性、中心性等。
*   **作業研究與最佳化：**
    許多最佳化問題，如旅行推銷員問題（TSP）、排程問題、資源分配問題等，都可以建模為圖論問題並使用圖論演算法求解。
*   **拓撲學：**
    在某些抽象層面，圖可以看作是一維單純複形，與拓撲學的某些概念有聯繫，例如圖的平面性。

-----

### 進階內容：握手定理與同構圖

#### 握手定理 (Handshaking Lemma)

*   **定義：**
    在任何無向圖中，所有頂點的度數之和等於邊數的兩倍。
    形式化表示為：$\sum_{v \in V} \text{deg}(v) = 2|E|$。
*   **推導：**
    考慮圖中的每一條邊。每條邊都有兩個端點，因此它在計算兩個頂點的度數時會被計數兩次。當我們將所有頂點的度數加起來時，實際上是每條邊都貢獻了兩次計數。所以，總度數必然是邊數的兩倍。
*   **例子：**
    對於前面的社交網絡圖：
    $\text{deg}(A)=2, \text{deg}(B)=2, \text{deg}(C)=2, \text{deg}(D)=3, \text{deg}(E)=1$
    總和 $= 2+2+2+3+1 = 10$
    邊數 $|E| = 5$
    $2|E| = 2 \times 5 = 10$
    驗證了握手定理。
*   **關聯：**
    握手定理是一個基本且強大的性質，常用於證明其他圖論性質，例如：在任何無向圖中，奇數度數的頂點數量一定是偶數。

#### 同構圖 (Isomorphic Graphs)

*   **定義：**
    兩個圖 $G_1 = (V_1, E_1)$ 和 $G_2 = (V_2, E_2)$ 如果它們的結構完全相同，只是頂點的標籤（或名稱）不同，則稱這兩個圖是同構的。
    形式化來說，如果存在一個從 $V_1$ 到 $V_2$ 的雙射函數 $f: V_1 \to V_2$，使得對於 $V_1$ 中的任意兩個頂點 $u$ 和 $v$，$\{u, v\} \in E_1$ 若且唯若 $\{f(u), f(v)\} \in E_2$，則稱 $G_1$ 和 $G_2$ 同構。
*   **例子：**
    圖 $G_1$: 頂點 $V_1 = \{1, 2, 3, 4\}$，邊 $E_1 = \{\{1, 2\}, \{2, 3\}, \{3, 4\}, \{4, 1\}\}$ (一個四邊形)
    圖 $G_2$: 頂點 $V_2 = \{A, B, C, D\}$，邊 $E_2 = \{\{A, B\}, \{B, C\}, \{C, D\}, \{D, A\}\}$ (另一個四邊形)
    這兩個圖是同構的。可以建立一個映射 $f(1)=A, f(2)=B, f(3)=C, f(4)=D$ 來證明。
*   **關聯：**
    判斷兩個圖是否同構是一個著名的難題，至今沒有已知的多項式時間演算法（對於一般圖），但也不是 NP 完全問題。這在圖論和計算複雜性理論中是一個重要的研究課題。

-----

### 常見錯誤與澄清

1.  **有向圖與無向圖的度數混淆：**
    *   **錯誤：** 在有向圖中，直接計算連接到頂點的邊數作為度數。
    *   **澄清：** 有向圖必須區分**入度**（指向該頂點的邊數）和**出度**（從該頂點指出的邊數）。無向圖才有單純的「度數」概念。
    *   **例子：** 在有向圖 $A \to B \leftarrow C$ 中，頂點 $B$ 的入度為 2，出度為 0。如果當成無向圖，$\text{deg}(B)=2$。

2.  **簡單圖的假設：**
    *   **錯誤：** 盲目將所有圖論演算法套用在包含自環或多重邊的圖上。
    *   **澄清：** 許多經典圖論演算法（如 DFS、BFS、Dijkstra 等）預設處理的是簡單圖。在處理多重圖或有自環的圖時，需要特別注意演算法的行為是否會受到影響，或者是否需要對圖進行預處理（例如：將多重邊視為單條邊，或對權重進行特殊處理）。

3.  **稀疏圖與稠密圖的劃分：**
    *   **錯誤：** 認為稀疏圖和稠密圖有明確的邊界數值。
    *   **澄清：** 稀疏與稠密是相對概念，通常用於指導圖的表示方法和演算法的選擇。一個圖是「稀疏」還是「稠密」取決於其邊數 $|E|$ 相對於可能的最大邊數 $|V|^2$ 的比例。當 $|E| \ll |V|^2$ 時為稀疏，當 $|E| \approx |V|^2$ 時為稠密。重點是它們對演算法效率的影響，而非絕對數值。

4.  **連通性的判斷（有向圖）：**
    *   **錯誤：** 認為有向圖只要「看起來」能到達所有點就是連通的。
    *   **澄清：** 有向圖的連通性有**弱連通**和**強連通**之分。弱連通是指忽略方向後是連通的，而強連通則要求任意兩點之間都能雙向到達。這兩種連通性的判義和應用場景是不同的。

-----

### 小練習 (附詳解)

#### 練習一：圖的表示與度數計算

考慮一個無向、無權的簡單圖 $G=(V, E)$，其中頂點 $V = \{A, B, C, D, E\}$，邊 $E = \{\{A, B\}, \{A, C\}, \{B, D\}, \{C, D\}, \{D, E\}\}$。

1.  繪製此圖。
2.  列出所有頂點的度數。
3.  寫出其鄰接矩陣（假設頂點順序為 A, B, C, D, E）。
4.  寫出其鄰接列表。

**詳解：**

1.  **繪製此圖：**
    ```
    A --- B
    |     |
    C --- D --- E
    ```
    (這是以文字形式表示的簡圖，實際繪製時為節點和連線)

2.  **所有頂點的度數：**
    *   $\text{deg}(A) = 2$ (與 B, C 相連)
    *   $\text{deg}(B) = 2$ (與 A, D 相連)
    *   $\text{deg}(C) = 2$ (與 A, D 相連)
    *   $\text{deg}(D) = 3$ (與 B, C, E 相連)
    *   $\text{deg}(E) = 1$ (與 D 相連)
    *   驗證握手定理：$2+2+2+3+1 = 10$，邊數為 5，$2 \times 5 = 10$，符合。

3.  **鄰接矩陣 (Adjacency Matrix)：**
    頂點順序為 A(0), B(1), C(2), D(3), E(4)。
    $$
    \begin{pmatrix}
    0 & 1 & 1 & 0 & 0 \\
    1 & 0 & 0 & 1 & 0 \\
    1 & 0 & 0 & 1 & 0 \\
    0 & 1 & 1 & 0 & 1 \\
    0 & 0 & 0 & 1 & 0
    \end{pmatrix}
    $$

4.  **鄰接列表 (Adjacency List)：**
    ```
    A: [B, C]
    B: [A, D]
    C: [A, D]
    D: [B, C, E]
    E: [D]
    ```

#### 練習二：判斷連通性與路徑

考慮一個有向圖 $G=(V, E)$，其中頂點 $V = \{1, 2, 3, 4\}$，邊 $E = \{(1, 2), (2, 3), (3, 1), (3, 4)\}$。

1.  繪製此有向圖。
2.  判斷此圖是強連通的、弱連通的，還是兩者都不是？
3.  列出從頂點 1 到頂點 4 的所有簡單路徑。

**詳解：**

1.  **繪製此有向圖：**
    ```
    1 --> 2
    ^     |
    |     v
    3 --> 4
    ```
    (實際繪製時為節點和帶方向的箭頭連線)

2.  **判斷連通性：**
    *   **強連通性：**
        *   從 1 到 2 有路徑 $1 \to 2$。
        *   從 2 到 1 有路徑 $2 \to 3 \to 1$。
        *   從 1 到 3 有路徑 $1 \to 2 \to 3$。
        *   從 3 到 1 有路徑 $3 \to 1$。
        *   從 1, 2, 3 之間，它們是強連通的。
        *   然而，從頂點 4 到頂點 1, 2, 3 沒有任何路徑（因為只有 $3 \to 4$ 而沒有 $4 \to ...$ 的邊）。
        *   因此，此圖**不是強連通的**。
    *   **弱連通性：**
        *   將所有有向邊替換為無向邊後，我們得到：$1-2-3-4$。
        *   在這個無向圖中，任意兩個頂點之間都存在路徑 (例如 $4-3-1$, $4-3-2$ 等)。
        *   因此，此圖是**弱連通的**。

3.  **從頂點 1 到頂點 4 的所有簡單路徑：**
    *   路徑一：$1 \to 2 \to 3 \to 4$
    *   由於是簡單路徑，頂點不能重複。沒有其他路徑能從 1 到 4。

-----

### 延伸閱讀與參考

*   **經典教材：**
    *   **《圖論導引》（Graph Theory, Diestel）：** 一本廣受好評的圖論研究生級別教材，內容全面而嚴謹。
    *   **《演算法導論》（Introduction to Algorithms, Cormen, Leiserson, Rivest, Stein）：** 通常簡稱為 CLRS，其中有多個章節詳細介紹圖論的基本概念和各種圖演算法。
    *   **《離散數學及其應用》（Discrete Mathematics and Its Applications, Kenneth H. Rosen）：** 離散數學經典教材，其中有專門的章節介紹圖論。

*   **線上資源：**
    *   **GeeksforGeeks - Graph Theory：** 提供了大量圖論概念、演算法和問題的解釋和程式碼實現。
        [https://www.geeksforgeeks.org/graph-data-structure-and-algorithms/](https://www.geeksforgeeks.org/graph-data-structure-and-algorithms/) (英文)
    *   **Wikipedia - Graph Theory：** 提供圖論相關概念的概述和連結。
        [https://zh.wikipedia.org/wiki/%E5%9B%BE%E8%AE%BA](https://zh.wikipedia.org/wiki/%E5%9B%BE%E8%AE%BA) (繁體中文)
    *   **MIT OpenCourseware - Introduction to Algorithms：** 包含圖論相關課程的影片和筆記。
        [https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-046j-design-and-analysis-of-algorithms-spring-2015/](https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-046j-design-and-analysis-of-algorithms-spring-2015/) (英文)