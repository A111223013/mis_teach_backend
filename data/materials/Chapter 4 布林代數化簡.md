### Chapter 4: 布林代數化簡

在數位邏輯設計中，布林代數（Boolean Algebra）是描述和分析數位電路行為的數學基礎。而布林代數化簡，則是將複雜的布林表達式簡化為等價但更簡潔形式的過程。這不僅能減少電路所需的邏輯閘數量、降低製造成本、減少功耗，還能縮短訊號傳播延遲，提升電路性能與可靠性。本章將深入探討布林代數的化簡原理與常用方法。

-----

#### 1.1 核心概念與化簡目的

##### 定義：布林表達式與邏輯函數
布林表達式是由布林變數（通常用 $A, B, C, \dots$ 表示，值為 0 或 1）、布林運算子（AND 符號 $\cdot$ 或直接併寫、OR 符號 $+$、NOT 符號 $\bar{\phantom{A}}$ 或 $'$）和括號組成。每一個布林表達式都代表一個邏輯函數，輸出值同樣為 0 或 1。

##### 核心觀念：化簡的目的
布林代數化簡的核心目標是：
*   **減少邏輯閘數量：** 簡化的表達式通常對應更少的邏輯閘，降低硬體成本。
*   **降低功耗：** 邏輯閘數量減少，功耗自然降低。
*   **減少延遲：** 較少的邏輯閘層級意味著訊號從輸入到輸出的傳播時間縮短。
*   **提高可靠性：** 複雜的電路更容易出錯，簡潔的設計通常更可靠。

-----

#### 1.2 布林代數基本定律

在進行布林代數化簡時，我們需要熟練運用一系列基本定律。這些定律是化簡的基石，允許我們在不改變邏輯函數行為的前提下，轉換和簡化表達式。

##### 核心觀念：重要定律概覽
以下列出布林代數中最重要的定律：

1.  **交換律 (Commutative Laws)**
    *   $A + B = B + A$
    *   $A \cdot B = B \cdot A$
    *   **定義：** 運算元的順序不影響結果。

2.  **結合律 (Associative Laws)**
    *   $(A + B) + C = A + (B + C)$
    *   $(A \cdot B) \cdot C = A \cdot (B \cdot C)$
    *   **定義：** 運算元的組合方式不影響結果。

3.  **分配律 (Distributive Laws)**
    *   $A \cdot (B + C) = A \cdot B + A \cdot C$ (與代數相同)
    *   $A + (B \cdot C) = (A + B) \cdot (A + C)$ (布林代數特有，重要！)
    *   **定義：** 允許將外部運算子分配到括號內的運算元上。

4.  **吸收律 (Absorption Laws)**
    *   $A + A \cdot B = A$
    *   $A \cdot (A + B) = A$
    *   **定義：** 當一個變數同時以不同運算連接其與另一個變數的組合時，這個變數會「吸收」掉組合項。

5.  **互補律 (Complement Laws)**
    *   $A + \bar{A} = 1$
    *   $A \cdot \bar{A} = 0$
    *   **定義：** 變數與其補數的OR運算結果為1，AND運算結果為0。

6.  **等冪律 (Idempotent Laws)**
    *   $A + A = A$
    *   $A \cdot A = A$
    *   **定義：** 變數與自身的OR或AND運算結果仍是自身。

7.  **雙重否定律 (Double Negation Law)**
    *   $\overline{\bar{A}} = A$
    *   **定義：** 對變數進行兩次否定運算，結果回到變數本身。

8.  **迪摩根定律 (De Morgan's Laws)**
    *   $\overline{A + B} = \bar{A} \cdot \bar{B}$
    *   $\overline{A \cdot B} = \bar{A} + \bar{B}$
    *   **定義：** 將複數項的否定轉換為單項否定，並改變運算子。這是將SOP形式（Sum of Products）轉換為POS形式（Product of Sums）的關鍵。

9.  **單位元素與零元素 (Identity and Null Laws)**
    *   $A + 0 = A$ (0是OR運算的單位元素)
    *   $A \cdot 1 = A$ (1是AND運算的單位元素)
    *   $A + 1 = 1$ (1是OR運算的零元素)
    *   $A \cdot 0 = 0$ (0是AND運算的零元素)
    *   **定義：** 與特殊常數0或1進行運算時的行為。

##### 例子與推導：分配律 $A + (B \cdot C) = (A + B) \cdot (A + C)$
我們可以透過真值表或代數方式來證明這個重要的分配律：

**代數證明：**
從右邊開始展開：
$(A + B) \cdot (A + C)$
$= A \cdot A + A \cdot C + B \cdot A + B \cdot C$ (分配律)
$= A + A \cdot C + A \cdot B + B \cdot C$ (等冪律 $A \cdot A = A$，交換律 $B \cdot A = A \cdot B$)
$= A \cdot (1 + C) + A \cdot B + B \cdot C$ (提取公因數 A)
$= A \cdot 1 + A \cdot B + B \cdot C$ (單位元素 $1+C=1$)
$= A + A \cdot B + B \cdot C$ (單位元素 $A \cdot 1 = A$)
$= A + B \cdot C$ (吸收律 $A + A \cdot B = A$)
因此， $A + (B \cdot C) = (A + B) \cdot (A + C)$ 得證。

##### 與相鄰概念的關聯
這些定律構成了布林代數化簡的「工具箱」。熟練掌握它們是進行代數化簡的基礎。同時，這些定律也是卡諾圖（Karnaugh Map）等圖形化化簡方法背後的數學原理。例如，卡諾圖中相鄰格子的合併，本質上就是利用了 $A\bar{B} + AB = A(\bar{B}+B) = A(1) = A$ 這樣的互補律和分配律組合。

-----

#### 1.3 化簡方法

布林代數的化簡主要有兩種方法：代數法和卡諾圖法。

##### 1.3.1 代數法化簡

##### 核心觀念：運用定律逐步簡化
代數法是直接運用上述布林代數定律，透過一步步的數學推導來簡化布林表達式。這種方法需要對定律有深刻的理解和靈活的應用能力。

##### 典型例子與推導
**例題：** 化簡布林表達式 $F = A \bar{B} C + A B C + \bar{A} B C$

**推導步驟：**
1.  **尋找共同因子：** 觀察前兩項 $A \bar{B} C + A B C$，它們的共同因子是 $AC$。
    $F = AC(\bar{B} + B) + \bar{A} B C$
2.  **應用互補律：** 根據互補律 $\bar{B} + B = 1$。
    $F = AC(1) + \bar{A} B C$
3.  **應用單位元素：** 根據單位元素 $AC \cdot 1 = AC$。
    $F = AC + \bar{A} B C$
4.  **再次尋找共同因子：** 現在 $AC + \bar{A} B C$ 的共同因子是 $C$。
    $F = C(A + \bar{A} B)$
5.  **應用吸收律的推廣形式：** 這裡我們可以使用一個重要的恆等式：$A + \bar{A} B = A + B$。
    *   **證明 $A + \bar{A} B = A + B$：**
        $A + \bar{A} B = (A + \bar{A})(A + B)$ (分配律 $X + YZ = (X+Y)(X+Z)$，其中 $X=A, Y=\bar{A}, Z=B$)
        $= 1 \cdot (A + B)$ (互補律 $A + \bar{A} = 1$)
        $= A + B$ (單位元素)
    所以，將 $A + \bar{A} B$ 替換為 $A + B$。
    $F = C(A + B)$
6.  **最終結果：** 簡化後的表達式為 $F = AC + BC$ (如果需要展開)。

##### 與相鄰概念的關聯
代數法是最基礎的化簡方式，它考驗了學習者對布林代數定律的理解和應用。雖然對於少量變數的複雜表達式可能會比較繁瑣，但它是理解更高級化簡方法（如卡諾圖和 Quine-McCluskey 演算法）的基礎。

-----

##### 1.3.2 卡諾圖 (Karnaugh Map)

##### 核心觀念：圖形化化簡工具
卡諾圖（K-map）是一種圖形化的布林表達式化簡工具，特別適用於處理具有2到5個變數的邏輯函數。它利用了布林代數的鄰接特性，將真值表的輸出值以特定方式排列在一個網格中，透過圈選相鄰的「1」來直接找出最簡的積之和（SOP）形式或和之積（POS）形式。卡諾圖的網格排列基於格雷碼（Gray code），確保相鄰的儲存格只有一個變數不同。

##### 卡諾圖的建立與圈選規則：

1.  **建立卡諾圖：** 根據變數數量繪製網格。
    *   2變數：2x2
    *   3變數：2x4
    *   4變數：4x4
    *   5變數：兩個4x4圖（本章不深入討論5變數）
2.  **填入數值：** 將邏輯函數的真值表輸出（0, 1, 或 Don't Care 'X'）填入對應的儲存格。格雷碼用於標記行和列，確保物理相鄰的儲存格邏輯上也是相鄰的（只有一個變數不同）。
3.  **圈選群組：**
    *   只能圈選包含 $2^n$ 個 1 的矩形或正方形群組（例如 1, 2, 4, 8, ... 個 1）。
    *   群組必須是水平或垂直的，不能是斜的。
    *   群組可以跨越圖的邊界（上下邊緣、左右邊緣互相相鄰）。
    *   盡可能圈選最大的群組。
    *   每個 1 必須至少被一個群組圈選。
    *   可以重疊圈選，以找到最大的群組。
    *   優先圈選只包含「未被其他群組包含的 1」的群組（稱為必要質含項）。
4.  **寫出最簡表達式：** 對每個圈選的群組，找出在該群組內保持不變的變數，並組合它們。

##### 典型例子與推導

**例1：2變數卡諾圖**
化簡 $F(A,B) = \sum(1, 3)$ (即 minterms $m_1, m_3$)

|     | $\bar{B}$ (0) | $B$ (1) |
| :-- | :------------ | :------ |
| $\bar{A}$ (0) | 0             | **1**   |
| $A$ (1)   | 0             | **1**   |

*   **填值：** 將 $m_1 (A=0, B=1)$ 和 $m_3 (A=1, B=1)$ 填入 1。
*   **圈選：** 圈選垂直的兩個 1 (代表 $\bar{A}B$ 和 $AB$)。
*   **結果：** 在這個群組中，$A$ 變了 ($\bar{A} \to A$)，$B$ 沒變 (一直是 $B$)。
    因此，化簡結果是 $F = B$。
    （代數證明：$\bar{A}B + AB = B(\bar{A}+A) = B \cdot 1 = B$）

**例2：3變數卡諾圖**
化簡 $F(A,B,C) = \sum(0,2,4,5,6)$

| $A \setminus BC$ | 00 ($\bar{B}\bar{C}$) | 01 ($\bar{B}C$) | 11 ($BC$) | 10 ($B\bar{C}$) |
| :---------------- | :-------------------- | :-------------- | :-------- | :--------------- |
| $\bar{A}$ (0)     | **1** ($m_0$)         | 0               | 0         | **1** ($m_2$)    |
| $A$ (1)           | **1** ($m_4$)         | **1** ($m_5$)   | 0         | **1** ($m_6$)    |

*   **填值：** 根據 minterms 填入 1。
*   **圈選：**
    1.  圈選最左邊一列的兩個 1 ($m_0, m_4$)：代表 $\bar{A}\bar{B}\bar{C} + A\bar{B}\bar{C} = \bar{B}\bar{C}$
    2.  圈選最右邊一列的兩個 1 ($m_2, m_6$)：代表 $\bar{A}B\bar{C} + AB\bar{C} = B\bar{C}$
    3.  圈選 $m_4, m_5$ 相鄰的兩個 1：代表 $A\bar{B}\bar{C} + A\bar{B}C = A\bar{B}$
    *   **優化圈選：** 注意到 $m_0$ 可以和 $m_2$ 跨界（左右相鄰）圈選，形成 $\bar{A}\bar{C}$。
    *   **最佳圈選策略：**
        *   一個四個 1 的群組 (環繞)：$m_0, m_2, m_4, m_6$ 都是 $\bar{C}$ (因為 $B$ 變了 $0 \to 1, 1 \to 0$ 且 $A$ 變了 $0 \to 1, 1 \to 0$)。所以這四個 1 形成一個 $\bar{C}$ 的項。
        *   一個兩個 1 的群組：$m_4, m_5$ (代表 $A\bar{B}\bar{C} + A\bar{B}C = A\bar{B}$)
*   **結果：** $F = \bar{C} + A\bar{B}$

**例3：4變數卡諾圖**
化簡 $F(A,B,C,D) = \sum(0,1,2,3,8,9,10,11)$

| $AB \setminus CD$ | 00 ($\bar{C}\bar{D}$) | 01 ($\bar{C}D$) | 11 ($CD$) | 10 ($C\bar{D}$) |
| :---------------- | :-------------------- | :-------------- | :-------- | :--------------- |
| 00 ($\bar{A}\bar{B}$) | **1** ($m_0$)         | **1** ($m_1$)   | **1** ($m_3$) | **1** ($m_2$)    |
| 01 ($\bar{A}B$)   | 0                     | 0               | 0         | 0                |
| 11 ($AB$)         | 0                     | 0               | 0         | 0                |
| 10 ($A\bar{B}$)   | **1** ($m_8$)         | **1** ($m_9$)   | **1** ($m_{11}$) | **1** ($m_{10}$) |

*   **填值：** 根據 minterms 填入 1。
*   **圈選：**
    1.  **第一個八個 1 的群組：**
        *   頂部一行 ($m_0, m_1, m_3, m_2$) 形成 $\bar{A}\bar{B}$ (因為 $C,D$ 都有變動)。
        *   底部一行 ($m_8, m_9, m_{11}, m_{10}$) 形成 $A\bar{B}$ (因為 $C,D$ 都有變動)。
        *   將這兩行合起來，即是這8個1形成一個大群組。
        *   在這八個 1 中，只有 $\bar{B}$ 是不變的。
    *   **結果：** $F = \bar{B}$

##### 與相鄰概念的關聯
卡諾圖法是代數化簡的直觀圖形表示，特別適合人類視覺識別模式。它能有效地處理中等複雜度的布林函數，通常比代數法更快找到最簡形式。然而，當變數數量超過4個時，卡諾圖的複雜度會急劇增加，此時 Quine-McCluskey 演算法等更系統化的方法更為適用。

-----

#### 1.4 常見錯誤與澄清

##### 1.4.1 代數化簡常見錯誤

1.  **迪摩根定律誤用：**
    *   **錯誤：** $\overline{A+B} = \bar{A} + \bar{B}$ (沒有改變運算子) 或 $\overline{A \cdot B} = A \cdot B$ (沒有對變數取反)。
    *   **澄清：** 迪摩根定律是將整個表達式取反，同時變數和運算子都要變。
        *   $\overline{A+B} = \bar{A} \cdot \bar{B}$
        *   $\overline{A \cdot B} = \bar{A} + \bar{B}$

2.  **分配律誤用：**
    *   **錯誤：** 認為 $A + (B \cdot C) = (A + B) \cdot C$。
    *   **澄清：** 這是代數中的常見錯誤，在布林代數中更要注意。正確的分配律是 $A + (B \cdot C) = (A + B) \cdot (A + C)$。

3.  **化簡不徹底：**
    *   **錯誤：** 提前停止化簡，沒有應用所有可能的定律。例如，將 $AC + \bar{A}BC$ 停留在這個形式，沒有進一步化簡為 $C(A+B)$。
    *   **澄清：** 應持續應用定律，直到沒有任何定律可以再減少項數或變數數量為止。

##### 1.4.2 卡諾圖常見錯誤

1.  **圈選非 $2^n$ 個 1：**
    *   **錯誤：** 圈選了 3 個、5 個或其他非 2 的冪次方個 1 的群組。
    *   **澄清：** 每個群組必須包含 $1, 2, 4, 8, \dots$ 個 1。這是利用布林代數中的合併特性 (例如 $X\bar{Y} + XY = X$)。

2.  **忽略邊緣相鄰：**
    *   **錯誤：** 在 3 或 4 變數卡諾圖中，忘記了圖的上下邊緣和左右邊緣是邏輯上相鄰的，以及四個角也是相鄰的。
    *   **澄清：** 將卡諾圖想像成一個環面（甜甜圈狀），邊界處的儲存格是彼此相鄰的。

3.  **沒有圈選最大的群組：**
    *   **錯誤：** 圈選了小的群組，而忽略了可以形成更大的群組。這會導致化簡不徹底。
    *   **澄清：** 總是優先圈選最大的 $2^n$ 個 1 的群組，因為更大的群組意味著更少的變數。

4.  **未包含所有 1：**
    *   **錯誤：** 有些 1 沒有被任何群組包含。
    *   **澄清：** 最終的化簡結果必須涵蓋真值表中所有輸出為 1 的 minterm。

5.  **不必要的群組：**
    *   **錯誤：** 圈選了一個群組，而該群組中的所有 1 都已經被其他群組包含。
    *   **澄清：** 每個群組至少要包含一個「新的」1，即尚未被其他「必要質含項」群組包含的 1。雖然重疊是允許的，但應避免完全多餘的群組。

-----

#### 1.5 小練習（附詳解）

##### 小練習 1：代數法化簡

請使用布林代數定律化簡以下表達式：
$F = \overline{(\overline{AB} + \bar{A}B)} + AB$

**詳解：**
1.  **應用迪摩根定律到最外層的否定：** $\overline{(X+Y)} = \bar{X} \cdot \bar{Y}$
    $F = \overline{(\overline{AB})} \cdot \overline{(\bar{A}B)} + AB$
2.  **應用雙重否定律：** $\overline{(\overline{AB})} = AB$
    $F = AB \cdot \overline{(\bar{A}B)} + AB$
3.  **再次應用迪摩根定律到 $\overline{(\bar{A}B)}$：**
    $F = AB \cdot (\overline{\bar{A}} + \bar{B}) + AB$
4.  **應用雙重否定律：** $\overline{\bar{A}} = A$
    $F = AB \cdot (A + \bar{B}) + AB$
5.  **應用分配律：** $AB \cdot (A + \bar{B}) = ABA + AB\bar{B}$
    $F = ABA + AB\bar{B} + AB$
6.  **應用等冪律 ($AA = A$) 和互補律 ($B\bar{B} = 0$)：**
    $F = AB + A \cdot 0 + AB$
7.  **應用零元素律 ($A \cdot 0 = 0$)：**
    $F = AB + 0 + AB$
8.  **應用等冪律 ($AB + AB = AB$)：**
    $F = AB$

**最終答案：** $F = AB$

-----

##### 小練習 2：卡諾圖化簡

請使用卡諾圖化簡以下 4 變數邏輯函數，並寫出其最簡 SOP 形式：
$F(A,B,C,D) = \sum(0,2,5,7,8,10,13,15)$

**詳解：**
1.  **繪製 4 變數卡諾圖並填入 1：**

| $AB \setminus CD$ | 00 ($\bar{C}\bar{D}$) | 01 ($\bar{C}D$) | 11 ($CD$) | 10 ($C\bar{D}$) |
| :---------------- | :-------------------- | :-------------- | :-------- | :--------------- |
| 00 ($\bar{A}\bar{B}$) | **1** ($m_0$)         | 0               | 0         | **1** ($m_2$)    |
| 01 ($\bar{A}B$)   | 0                     | **1** ($m_5$)   | **1** ($m_7$) | 0                |
| 11 ($AB$)         | 0                     | **1** ($m_{13}$) | **1** ($m_{15}$) | 0                |
| 10 ($A\bar{B}$)   | **1** ($m_8$)         | 0               | 0         | **1** ($m_{10}$) |

2.  **圈選最大的群組：**
    *   **群組 1 (綠色 - 跨邊界)：** 圈選四個角的 1 ($m_0, m_2, m_8, m_{10}$)。
        *   在 $AB$ 軸上，$B$ 變了 ($00 \to 10$)；在 $CD$ 軸上，$C$ 變了 ($00 \to 10$)。
        *   保持不變的是 $\bar{B}$ 和 $\bar{D}$。所以這個群組代表 $\bar{B}\bar{D}$。
    *   **群組 2 (藍色 - 垂直)：** 圈選右數第二列中間的兩個 1 ($m_5, m_{13}$)。
        *   在 $AB$ 軸上，$A$ 變了 ($\bar{A}B \to AB$)；在 $CD$ 軸上， $CD$ 保持不變 ($01$ 即 $\bar{C}D$)。
        *   保持不變的是 $B$ 和 $D$ (從 $m_5$ 的 $\bar{A}B\bar{C}D$ 和 $m_{13}$ 的 $AB\bar{C}D$)。所以這個群組代表 $B\bar{C}D$。
    *   **群組 3 (紅色 - 垂直)：** 圈選右數第二列最下方的兩個 1 ($m_7, m_{15}$)。
        *   在 $AB$ 軸上，$A$ 變了 ($\bar{A}B \to AB$)；在 $CD$ 軸上， $CD$ 保持不變 ($11$ 即 $CD$)。
        *   保持不變的是 $B$ 和 $D$ (從 $m_7$ 的 $\bar{A}BCD$ 和 $m_{15}$ 的 $ABCD$)。所以這個群組代表 $BCD$。
    *   **檢查：** 所有 1 都已被至少一個群組包含。

3.  **組合結果：**
    $F = \bar{B}\bar{D} + B\bar{C}D + BCD$
    *   可以進一步化簡 $B\bar{C}D + BCD = BD(\bar{C}+C) = BD(1) = BD$
    *   因此，$F = \bar{B}\bar{D} + BD$

**最終答案：** $F = \bar{B}\bar{D} + BD$

-----

#### 1.6 延伸閱讀/參考

1.  **Quine-McCluskey 演算法：** 當變數數量增加到 5 個或更多時，卡諾圖變得難以使用。Quine-McCluskey 演算法提供了一種系統化的代數方法來找出布林函數的最簡形式，它甚至可以透過電腦程式自動化執行。
2.  **數位邏輯設計 (Digital Design)：** 學習更多關於布林代數化簡的應用，以及如何將化簡後的表達式轉換為實際的邏輯電路（例如使用邏輯閘、多工器、解碼器等）。
    *   推薦書籍：Morris Mano, Michael D. Ciletti. *Digital Design*.
3.  **邏輯閘最佳化軟體 (Logic Synthesis Tools)：** 在實際的積體電路設計中，複雜的布林函數化簡通常由電子設計自動化 (EDA) 軟體處理。這些工具會使用 Quine-McCluskey 演算法的變體或其他更先進的演算法來實現最佳化。