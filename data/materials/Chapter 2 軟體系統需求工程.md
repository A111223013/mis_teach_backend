# Chapter 2 軟體系統需求工程

### 核心概念與定義

軟體系統開發的起點在於清晰地理解「我們要做什麼？」。這個「做什麼」的過程，就是需求工程的核心任務。

#### 什麼是需求工程？

需求工程（Requirements Engineering, RE）是一門關於開發軟體系統過程中，系統或服務應該滿足的目標、功能、限制及品質屬性，進行探索、分析、規格化、驗證與管理的學科與過程。它旨在確保所開發的系統能準確地解決使用者的問題並滿足利害關係人的期望。

*   **定義/核心觀念：**
    需求工程是軟體開發生命週期中最關鍵的階段之一，它確立了系統的邊界、範圍和目標。一個成功的專案往往始於一個成功且完善的需求工程過程。

*   **為什麼需求工程很重要？**
    1.  **降低專案風險：** 不明確或錯誤的需求是專案失敗的常見原因。早期發現和修正需求錯誤的成本遠低於開發後期。
    2.  **提高產品品質：** 確保開發出的產品符合使用者的實際需求和期望。
    3.  **促進溝通：** 提供一個共同的理解基礎，讓所有利害關係人（客戶、使用者、開發者、測試人員等）對系統有一個清晰、一致的認識。
    4.  **指導開發與測試：** 需求是設計、實作和測試的依據。

-----

#### 需求工程的生命週期活動

需求工程不是單一的活動，而是一個迭代且持續的過程，通常包含以下主要活動：

##### 需求獲取/發現 (Requirements Elicitation/Discovery)
*   **定義/核心觀念：** 這是收集利害關係人對系統期望和限制的過程。它涉及與客戶、使用者、領域專家等溝通，以揭示他們對新系統的需求。
*   **例子/方法：**
    *   **訪談 (Interviews)：** 與個別利害關係人進行一對一或小組會談。
    *   **問卷調查 (Questionnaires)：** 針對大量使用者收集數據。
    *   **原型法 (Prototyping)：** 建立系統的簡化版本或模型，讓使用者互動並提供回饋。
    *   **場景/用例 (Scenarios/Use Cases)：** 描述使用者如何與系統互動的具體情境。
    *   **使用者故事 (User Stories)：** 以使用者視角簡潔描述功能，格式通常為：「作為一個[角色]，我想要[目標]，以便[理由]。」
    *   **工作坊/腦力激盪 (Workshops/Brainstorming)：** 召集多個利害關係人共同討論與定義需求。

##### 需求分析 (Requirements Analysis)
*   **定義/核心觀念：** 獲取到的原始需求往往是零散、不一致或模糊的。需求分析的目標是整理、細化這些需求，識別其中的衝突、遺漏和模糊之處，並澄清其含義。
*   **例子/推導：**
    *   **結構化分析：** 使用資料流程圖 (DFD)、實體關係圖 (ERD) 等工具建模。
    *   **物件導向分析：** 使用UML（統一建模語言）的用例圖、類別圖、活動圖等。
    *   **優先級排序：** 根據商業價值、風險、實現難度等因素，為需求設定優先級。
    *   **可行性分析：** 評估技術、經濟、營運上的可行性。

##### 需求規格化/文件化 (Requirements Specification/Documentation)
*   **定義/核心觀念：** 將分析後的需求以清晰、無歧義、結構化的方式記錄下來，形成正式文件。這份文件是系統設計、實作、測試和維護的基礎。
*   **例子/文件類型：**
    *   **軟體需求規格說明書 (Software Requirements Specification, SRS)：** 這是最常見的需求文件，通常遵循 IEEE 830 等標準，包含引言、總體描述、詳細需求等章節。
    *   **使用者故事清單 (User Story Backlog)：** 在敏捷開發中，需求以使用者故事的形式儲存在待辦清單中。
    *   **用例規格 (Use Case Specification)：** 詳細描述每個用例的執行流程、前置條件、後置條件、主要流程和替代流程。

##### 需求驗證與確認 (Requirements Verification and Validation, V&V)
*   **定義/核心觀念：**
    *   **驗證 (Verification)：** 確保需求文件本身是「正確地建造了產品」（are we building the product *right*?），檢查其完整性、一致性、無歧義性、可追溯性、可測試性等品質屬性。
    *   **確認 (Validation)：** 確保所定義的需求是「建造了正確的產品」（are we building the *right* product?），即確認這些需求確實滿足了利害關係人的真實期望和業務目標。
*   **例子/方法：**
    *   **需求審查 (Requirements Review)：** 利害關係人共同審閱需求文件，找出問題。
    *   **原型展示 (Prototype Demonstration)：** 讓使用者與原型互動，確認功能和使用者介面是否符合預期。
    *   **測試用例生成 (Test Case Generation)：** 嘗試為每個需求編寫測試用例，以檢查其可測試性。
    *   **需求走查 (Requirements Walkthrough)：** 逐步解釋需求，確保理解一致。

##### 需求管理 (Requirements Management)
*   **定義/核心觀念：** 需求並非一成不變。需求管理是指在專案生命週期中，對需求變更進行追蹤、控制和溝通的過程。它確保所有利害關係人都能意識到需求的最新狀態。
*   **例子/活動：**
    *   **變更控制 (Change Control)：** 建立變更請求流程、變更影響分析、變更批准機制。
    *   **需求追溯性 (Requirements Traceability)：** 建立需求與其他開發物件（設計、程式碼、測試用例）之間的連結，便於影響分析。
    *   **版本控制 (Version Control)：** 管理需求文件的不同版本。
    *   **狀態追蹤 (Status Tracking)：** 追蹤每個需求的狀態（例如：待辦、開發中、已完成、已測試）。

-----

#### 需求類型

理解不同類型的需求有助於更全面地捕捉系統應具備的特徵。

##### 功能性需求 (Functional Requirements)
*   **定義/核心觀念：** 描述系統必須執行什麼動作或提供什麼服務，即系統「做什麼」。它們直接與系統的核心業務邏輯相關。
*   **例子：**
    *   系統必須允許使用者登入。
    *   使用者可以搜尋產品。
    *   系統應能處理客戶的訂單。
    *   管理員可以新增/編輯/刪除產品資訊。

##### 非功能性需求 (Non-functional Requirements, NFRs)
*   **定義/核心觀念：** 描述系統「如何」執行其功能，即系統的品質屬性或限制條件。它們對系統的可用性、效率、可靠性、可維護性等方面提出要求。
*   **例子：**
    *   **性能 (Performance)：** 系統應在 2 秒內響應使用者查詢。
    *   **安全性 (Security)：** 系統必須防止未經授權的存取。
    *   **可用性 (Usability)：** 系統的學習曲線應低於 1 小時。
    *   **可靠性 (Reliability)：** 系統的平均故障間隔時間 (MTBF) 應大於 1000 小時。
    *   **可擴展性 (Scalability)：** 系統應能支援 10,000 個並發使用者。
    *   **可維護性 (Maintainability)：** 新功能實作時間應不超過 2 週。
    *   **相容性 (Compatibility)：** 系統應支援主流瀏覽器（Chrome, Firefox, Edge）。

##### 其他常見需求類型
*   **使用者需求 (User Requirements)：** 以使用者易懂的語言描述系統目標，通常以使用者故事、場景或用例的形式呈現。
*   **系統需求 (System Requirements)：** 更詳細的技術規格，描述系統如何實現使用者需求，作為設計和實作的輸入。
*   **領域需求 (Domain Requirements)：** 來自應用領域的特定限制或特性，反映了業務環境的規則和約束。
*   **利害關係人需求 (Stakeholder Requirements)：** 反映了不同利害關係人（客戶、監管機構、內部部門）的具體期望。

-----

### 典型例子與轉換/推導

#### 從使用者故事到功能性需求

使用者故事是敏捷開發中常用的一種需求獲取方式，它通常比較高層次。我們需要將其細化為具體的功能性需求。

*   **例子：**
    **使用者故事：** 作為一個**已登入的顧客**，我想要**查看我的訂單歷史**，以便**追蹤我過去的購買記錄**。

    **推導為功能性需求 (以 SRS 格式的「應能」語句為例)：**
    1.  **FR-001：** 系統應允許已登入的顧客存取其訂單歷史頁面。
    2.  **FR-002：** 訂單歷史頁面應顯示顧客過往所有訂單的列表。
    3.  **FR-003：** 每個訂單應至少包含以下資訊：訂單編號、訂購日期、總金額和訂單狀態。
    4.  **FR-004：** 顧客應能點擊列表中的任一訂單，以查看該訂單的詳細資訊。
    5.  **FR-005：** 訂單詳細資訊頁面應顯示訂單內的所有商品清單（商品名稱、數量、單價、小計）、收貨地址、支付方式和運送資訊。

    **進一步考慮非功能性需求：**
    *   **NFR-性能：** 訂單歷史頁面應在 3 秒內載入完成，即使顧客有超過 1000 筆訂單。
    *   **NFR-安全性：** 顧客只能查看自己的訂單歷史，不能查看其他顧客的訂單。
    *   **NFR-可用性：** 訂單列表應提供排序功能（按日期、按金額），並可依訂單狀態進行篩選。

-----

#### 需求規格化範例 (SRS 結構簡述)

一個標準的軟體需求規格說明書 (SRS) 範本（如 IEEE 830）通常包含以下主要部分：

1.  **引言 (Introduction)**
    *   1.1 目的 (Purpose)
    *   1.2 產品範圍 (Product Scope)
    *   1.3 術語與縮寫 (Definitions, Acronyms, and Abbreviations)
    *   1.4 參考文獻 (References)
    *   1.5 概述 (Overview)

2.  **總體描述 (Overall Description)**
    *   2.1 產品視角 (Product Perspective)
    *   2.2 產品功能 (Product Functions)
    *   2.3 使用者類別與特徵 (User Classes and Characteristics)
    *   2.4 操作環境 (Operating Environment)
    *   2.5 設計與實作限制 (Design and Implementation Constraints)
    *   2.6 使用者文件 (User Documentation)
    *   2.7 假設與依賴 (Assumptions and Dependencies)

3.  **詳細需求 (Specific Requirements)**
    *   3.1 外部介面需求 (External Interface Requirements)
        *   3.1.1 使用者介面 (User Interfaces)
        *   3.1.2 軟體介面 (Software Interfaces)
        *   3.1.3 硬體介面 (Hardware Interfaces)
        *   3.1.4 通訊介面 (Communications Interfaces)
    *   3.2 功能性需求 (Functional Requirements)
        *   (每個功能性需求可有唯一ID、描述、輸入、輸出、處理、錯誤處理等)
        *   例如：FR-001 顧客登入
    *   3.3 非功能性需求 (Non-functional Requirements)
        *   3.3.1 性能需求 (Performance Requirements)
        *   3.3.2 安全性需求 (Security Requirements)
        *   3.3.3 可用性需求 (Availability Requirements)
        *   3.3.4 可靠性需求 (Reliability Requirements)
        *   ... (其他品質屬性)
    *   3.4 逆向需求 (Reverse Requirements) (某些特定領域可能需要)
    *   3.5 其他需求 (Other Requirements)

-----

### 與相鄰概念的關聯

需求工程是軟體開發生命週期的基礎，它與其他階段緊密相連，互為輸入和輸出。

*   **與系統分析和設計的關係：**
    *   **輸入：** 需求規格說明書是系統分析與設計階段的主要輸入。設計師基於明確的需求來規劃系統架構、模組劃分、資料庫結構和使用者介面。
    *   **輸出：** 設計文件可能會反過來揭示某些需求的可行性問題或遺漏，觸發需求的澄清或修改。

*   **與測試的關係：**
    *   **輸入：** 需求是測試用例設計的基礎。每個功能性需求和可測量的非功能性需求都應該有對應的測試用例來驗證其實現。
    *   **追溯性：** 需求追溯性鏈接可以確保所有需求都經過了測試，並且測試結果可以追溯到特定的需求。

*   **與專案管理的關係：**
    *   **範圍定義：** 需求定義了專案的範圍。需求變更是專案範圍蔓延的主要原因，因此需求管理對於專案的進度、成本和資源控制至關重要。
    *   **風險管理：** 未明確認識的需求是專案的最大風險之一。需求工程活動本身就是降低風險的重要手段。

*   **與敏捷開發的關係：**
    *   **使用者故事：** 敏捷開發中，使用者故事是主要的需求形式，它們通常被放置在產品待辦事項清單 (Product Backlog) 中。
    *   **迭代性：** 敏捷方法強調需求的迭代式發現和細化，每個短週期（Sprint）都會重新審視、澄清和實作一部分需求，並透過持續的回饋來調整。
    *   **客戶協作：** 敏捷尤其強調與客戶的密切協作，以確保需求始終與業務價值保持一致。

-----

### 常見錯誤與澄清

需求工程中存在許多常見的陷阱，導致專案失敗或產品不符預期。

1.  **需求不明確/含糊不清：**
    *   **錯誤：** 「系統應該反應快一點。」、「使用者介面要好用。」
    *   **澄清：** 這些都是主觀且無法測量的描述。應將其轉化為可測量的指標，例如：「系統響應時間應在 2 秒內完成 90% 的交易。」、「系統學習曲線應使新使用者在 30 分鐘內完成基本操作。」

2.  **混淆解決方案與需求：**
    *   **錯誤：** 「系統必須使用 PostgreSQL 資料庫。」、「我們需要一個按鈕來匯出 Excel 報告。」
    *   **澄清：** 客戶或使用者經常提出他們認為的解決方案，而非核心問題。需求應該描述「什麼」是必要的，而不是「如何」實現。例如，對於「匯出 Excel 報告」，核心需求可能是「使用者需要將報表資料導出進行進一步分析」，至於是否必須是 Excel 或按鈕，是設計層面的考量。

3.  **需求變更失控：**
    *   **錯誤：** 隨意接受所有來自客戶或內部團隊的需求變更，沒有正式流程和影響評估。
    *   **澄清：** 需求變更是不可避免的，但必須加以管理。應建立變更控制流程，包括變更請求、影響分析、成本效益評估、審批和溝通，以避免「範圍蔓延」。

4.  **忽略非功能性需求：**
    *   **錯誤：** 只關注功能，不考慮系統的性能、安全性、可用性、可擴展性等。
    *   **澄清：** 非功能性需求對系統的成功同樣重要。它們通常是隱性的，但若不滿足，會導致使用者體驗差、維護困難或系統崩潰。應主動獲取和規格化這些需求，並在設計和測試階段給予足夠重視。

5.  **缺乏利害關係人參與：**
    *   **錯誤：** 僅憑少數人或開發團隊想像需求，未充分與最終使用者和業務專家溝通。
    *   **澄清：** 讓所有相關利害關係人從早期階段就積極參與需求獲取和驗證過程，可以大大提高需求質量和最終產品的接受度。

-----

### 小練習（附詳解）

#### 小練習 1：識別需求類型

**題目：** 假設你正在為一個線上圖書館系統收集需求。請將以下描述分類為功能性需求（FR）或非功能性需求（NFR），並指出 NFR 的具體類型。

1.  使用者應該能夠搜尋書籍（按書名、作者或 ISBN）。
2.  系統應該在 1 秒內返回搜尋結果，即使資料庫中有超過 100 萬本書籍。
3.  未經授權的使用者不得存取管理員介面。
4.  系統應提供一個功能，允許圖書館管理員新增新的書籍到庫存中。
5.  在系統發布後的 3 個月內，應該能夠將新的支付閘道整合到系統中。
6.  系統應支援同時 500 名使用者同時操作而不會出現明顯延遲。

-----

**小練習 1 詳解：**

1.  **使用者應該能夠搜尋書籍（按書名、作者或 ISBN）。**
    *   **分類：** 功能性需求（FR）。
    *   **理由：** 描述了系統必須提供的具體功能。

2.  **系統應該在 1 秒內返回搜尋結果，即使資料庫中有超過 100 萬本書籍。**
    *   **分類：** 非功能性需求（NFR）。
    *   **具體類型：** 性能（Performance）需求。
    *   **理由：** 描述了系統在執行搜尋功能時的響應速度和承載能力，是關於系統如何工作的品質屬性。

3.  **未經授權的使用者不得存取管理員介面。**
    *   **分類：** 非功能性需求（NFR）。
    *   **具體類型：** 安全性（Security）需求。
    *   **理由：** 描述了系統的保護機制，防止未經授權的存取。

4.  **系統應提供一個功能，允許圖書館管理員新增新的書籍到庫存中。**
    *   **分類：** 功能性需求（FR）。
    *   **理由：** 描述了系統管理員的一個具體操作功能。

5.  **在系統發布後的 3 個月內，應該能夠將新的支付閘道整合到系統中。**
    *   **分類：** 非功能性需求（NFR）。
    *   **具體類型：** 可維護性（Maintainability）/可擴展性（Extensibility）需求。
    *   **理由：** 描述了系統未來修改和擴展的能力，即其適應變化的容易程度。

6.  **系統應支援同時 500 名使用者同時操作而不會出現明顯延遲。**
    *   **分類：** 非功能性需求（NFR）。
    *   **具體類型：** 性能（Performance）/可擴展性（Scalability）需求。
    *   **理由：** 描述了系統在特定負載下的表現，涉及吞吐量和穩定性。

-----

#### 小練習 2：編寫使用者故事並轉化為功能性需求

**題目：**
請為一個**線上外賣訂餐系統**，編寫一個關於「**下訂單**」功能的使用者故事。然後，將這個使用者故事轉化為至少 **3 條**具體的功能性需求。

**步驟：**
1.  **編寫使用者故事：** 遵循「作為一個[角色]，我想要[目標]，以便[理由]」的格式。
2.  **分析使用者故事：** 識別出達成該目標所需的關鍵行為。
3.  **轉化為功能性需求：** 將這些行為寫成清晰、可驗證的功能性需求語句。

-----

**小練習 2 詳解：**

1.  **編寫使用者故事：**
    *   **使用者故事：** 作為一個**已登入的顧客**，我想要**從選定的餐廳中點選菜品並提交訂單**，以便**在我家收到熱騰騰的美食**。

2.  **分析使用者故事：**
    *   要「點選菜品」，顧客需要能瀏覽菜單，將菜品加入購物車。
    *   要「提交訂單」，顧客需要確認購物車內容，選擇支付方式，填寫配送地址。
    *   最終目標是「收到美食」，這意味著訂單成功提交後，系統需要處理並通知餐廳。

3.  **轉化為功能性需求：**
    *   **FR-OD-001：** 系統應允許顧客從選定的餐廳菜單中，選擇菜品並調整數量，將其加入到購物車中。
    *   **FR-OD-002：** 系統應提供購物車功能，顯示顧客已選擇的菜品清單、總價，並允許顧客修改或移除菜品。
    *   **FR-OD-003：** 系統應在顧客確認購物車內容後，引導顧客選擇配送地址、支付方式，並提交訂單。
    *   **FR-OD-004：** 成功提交訂單後，系統應向顧客顯示訂單確認頁面，並向餐廳發送訂單通知。
    *   **FR-OD-005：** 系統應在顧客提交訂單前，驗證所選配送地址是否在餐廳的服務範圍內。

-----

### 延伸閱讀/參考

*   **書籍：**
    *   **《需求工程：軟體、系統與企業需求技術》 (Requirements Engineering: Software, Systems, and Enterprise Approaches)** by Ian Alexander and Ljerka Beus-Dukic. (業界經典，全面深入)
    *   **《軟體工程：實踐者的研究方法》 (Software Engineering: A Practitioner's Approach)** by Roger S. Pressman. (包含需求工程章節的綜合性軟體工程教材)
    *   **《用例驅動的需求分析》(Applying Use Cases: A Practical Guide)** by Geri Schneider and Darrel Winz. (專注於用例方法)
    *   **《使用者故事對照》(User Story Mapping: Discover the Whole Story, Build the Right Product)** by Jeff Patton. (敏捷開發中需求管理的推薦書籍)

*   **標準：**
    *   **IEEE 830-1998 (R2009) - Recommended Practice for Software Requirements Specifications:** 軟體需求規格說明書的國際標準範本。

*   **網站與組織：**
    *   **國際需求工程協會 (International Institute of Business Analysis, IIBA)：** 提供商業分析師認證（如CBAP）和業務分析知識體系指南（BABOK Guide），其中包含大量需求工程的實踐。
    *   **Project Management Institute (PMI)：** 其《專案管理知識體系指南》(PMBOK Guide) 中也包含了需求管理的相關知識。
    *   **Scrum.org / Scrum Alliance：** 關於敏捷和 Scrum 的資源，其中使用者故事是重要的需求形式。