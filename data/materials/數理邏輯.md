# 數理邏輯

## 引言

數理邏輯（Mathematical Logic）是數學的一個分支，它研究的是推論和證明的形式化方法。其核心在於將自然語言中模稜兩可的推論過程，轉化為嚴謹、精確的符號系統。透過這種轉化，我們得以客觀地判斷論證的有效性，避免語義上的模糊不清。

數理邏輯是電腦科學、人工智能、哲學、語言學等眾多領域的基石。在電腦科學中，它被用於設計數位電路、編寫軟體程式的正確性驗證、資料庫查詢語言的構造以及人工智能中的知識表示與推理。理解數理邏輯不僅能提升我們的邏輯思維能力，也能幫助我們更好地理解和構建複雜的計算系統。

本章將從數理邏輯最基礎的部分——命題邏輯（Propositional Logic）——開始，逐步介紹其核心概念、語法、語義，以及如何運用這些工具進行邏輯推論。

-----

## 命題邏輯 (Propositional Logic)

命題邏輯是數理邏輯中最基礎的層次，它處理的是可以判斷真假的基本陳述句（即命題）及其組合。

### 核心概念與定義

#### 命題 (Proposition)

**定義：** 一個命題是一個能被明確判斷為「真」（True, 通常表示為 `T` 或 `1`）或「假」（False, 通常表示為 `F` 或 `0`），但不能兩者皆是的陳述句。

**例子：**
*   「地球是圓的。」(真)
*   「2 + 2 = 4。」(真)
*   「所有的貓都會飛。」(假)
*   「今天下雨。」(真假取決於當天的天氣)

**非命題的例子：**
*   「你吃飯了嗎？」(疑問句)
*   「請把門關上。」(命令句)
*   「啊！好美！」(感嘆句)
*   「x + 1 = 5。」(只有當 x 確定時才能判斷真假，在命題邏輯中，這被視為一個開放的陳述，直到 x 被賦值)

#### 命題變數 (Propositional Variables)

**定義：** 我們使用大寫字母，如 $P, Q, R, S, \dots$ 或 $P_1, P_2, \dots$，來代表一個命題。這些符號稱為命題變數。

**例子：**
*   讓 $P$ 代表命題「今天下雨」。
*   讓 $Q$ 代表命題「我會帶傘」。

#### 邏輯連接詞 (Logical Connectives)

**定義：** 邏輯連接詞是用於將簡單命題組合成更複雜命題的符號。每個連接詞都有其特定的真值表，定義了它如何影響複合命題的真假值。

##### 否定 (Negation, $\neg$)

**定義：** 否定連接詞 $\neg$（讀作「非」或「不」）用於表達一個命題的反面。如果命題 $P$ 為真，則 $\neg P$ 為假；如果 $P$ 為假，則 $\neg P$ 為真。

**真值表：**

| $P$ | $\neg P$ |
| :--: | :---: |
| T | F |
| F | T |

**例子：**
*   如果 $P$ 是「今天下雨」，則 $\neg P$ 是「今天不下雨」。
*   如果 $P$ 是「2 + 2 = 5」，則 $\neg P$ 是「2 + 2 $\neq$ 5」（即「2 + 2 = 5」不成立）。

##### 合取 (Conjunction, $\land$)

**定義：** 合取連接詞 $\land$（讀作「且」或「並且」）用於連接兩個命題。只有當兩個命題 $P$ 和 $Q$ 都為真時，$P \land Q$ 才為真，否則為假。

**真值表：**

| $P$ | $Q$ | $P \land Q$ |
| :--: | :--: | :---: |
| T | T | T |
| T | F | F |
| F | T | F |
| F | F | F |

**例子：**
*   如果 $P$ 是「天晴」，$Q$ 是「溫度高」，則 $P \land Q$ 是「天晴且溫度高」。
*   只有當「天晴」為真且「溫度高」為真時，「天晴且溫度高」才為真。

##### 析取 (Disjunction, $\lor$)

**定義：** 析取連接詞 $\lor$（讀作「或」）用於連接兩個命題。當 $P$ 和 $Q$ 之中至少有一個為真時，$P \lor Q$ 才為真。只有當 $P$ 和 $Q$ 都為假時，$P \lor Q$ 才為假。這是一種「包含性或」（inclusive or），允許兩者都為真。

**真值表：**

| $P$ | $Q$ | $P \lor Q$ |
| :--: | :--: | :---: |
| T | T | T |
| T | F | T |
| F | T | T |
| F | F | F |

**例子：**
*   如果 $P$ 是「你會說中文」，$Q$ 是「你會說英文」，則 $P \lor Q$ 是「你會說中文或你會說英文」。
*   如果你只會說中文，這個命題為真；如果你只會說英文，這個命題為真；如果你兩者都會說，這個命題也為真。

##### 條件 (Implication, $\to$)

**定義：** 條件連接詞 $\to$（讀作「如果...那麼...」或「蘊含」）用於表達因果關係或邏輯推導。$P \to Q$ 讀作「如果 $P$ 則 $Q$」，其中 $P$ 稱為前件（antecedent）或前提（hypothesis），$Q$ 稱為後件（consequent）或結論（conclusion）。$P \to Q$ 只有在前件 $P$ 為真且後件 $Q$ 為假時才為假，在其他所有情況下都為真。

**真值表：**

| $P$ | $Q$ | $P \to Q$ |
| :--: | :--: | :---: |
| T | T | T |
| T | F | F |
| F | T | T |
| F | F | T |

**例子：**
*   如果 $P$ 是「今天下雨」，$Q$ 是「地面是濕的」，則 $P \to Q$ 是「如果今天下雨，那麼地面是濕的」。
*   **關鍵解釋：**
    *   T $\to$ T：「今天下雨 (T)，地面是濕的 (T)」，符合邏輯，為真。
    *   T $\to$ F：「今天下雨 (T)，地面卻不是濕的 (F)」，這與我們的期望矛盾，因此為假。
    *   F $\to$ T：「今天沒下雨 (F)，地面是濕的 (T)」，可能昨天下雨、有人灑水，或別的原因，並不與「如果下雨地面濕」的陳述衝突，故為真。
    *   F $\to$ F：「今天沒下雨 (F)，地面也不是濕的 (F)」，這同樣不與原陳述衝突，故為真。
*   **與自然語言的關聯：** 數理邏輯中的條件語句，其真值定義有時與日常語言的「如果...那麼...」有所不同。特別是當前件為假時，邏輯蘊含總是真，這被稱為「假可以蘊含任何事物」（ex falso quodlibet）。這是為了保持邏輯系統的簡潔性和一致性。

##### 雙條件 (Biconditional, $\leftrightarrow$)

**定義：** 雙條件連接詞 $\leftrightarrow$（讀作「若且唯若」或「等價於」）表達兩個命題之間的等價關係。$P \leftrightarrow Q$ 只有當 $P$ 和 $Q$ 具有相同的真值時（即同真或同假）才為真。

**真值表：**

| $P$ | $Q$ | $P \leftrightarrow Q$ |
| :--: | :--: | :---: |
| T | T | T |
| T | F | F |
| F | T | F |
| F | F | T |

**例子：**
*   如果 $P$ 是「你通過考試」，$Q$ 是「你努力學習」，則 $P \leftrightarrow Q$ 是「你通過考試，若且唯若你努力學習」。
*   這意味著「通過考試」與「努力學習」在真值上是同步的：如果你通過了，那麼你一定努力學習了；如果你沒通過，那麼你一定沒努力學習。

#### 真值表 (Truth Table)

**定義：** 真值表是一種用於系統地列出命題公式在所有可能真值賦值下其真假值的表格。它是分析和判斷命題邏輯公式性質（如重言式、矛盾式）的基本工具。

**例子：**
要構建一個命題公式 $P \lor (\neg P \land Q)$ 的真值表：

1.  列出所有獨立的命題變數及其所有可能的真值組合。這裡有 $P$ 和 $Q$，所以有 $2^2 = 4$ 種組合。
2.  逐列計算複合部分的真值。

| $P$ | $Q$ | $\neg P$ | $\neg P \land Q$ | $P \lor (\neg P \land Q)$ |
| :--: | :--: | :---: | :----------: | :------------------: |
| T | T | F | F | T |
| T | F | F | F | T |
| F | T | T | T | T |
| F | F | T | F | F |

-----

### 語法與語義 (Syntax and Semantics)

#### 良構公式 (Well-Formed Formulas, WFFs)

**定義：** 良構公式是指遵循特定語法規則構造的命題公式。它確保了公式在結構上是合法的，從而可以被明確地解釋。

**構造規則：**
1.  任何命題變數（如 $P, Q, R, \dots$）都是一個良構公式。
2.  如果 $A$ 是一個良構公式，則 $\neg A$ 也是一個良構公式。
3.  如果 $A$ 和 $B$ 都是良構公式，且 $\circ$ 是一個二元邏輯連接詞（$\land, \lor, \to, \leftrightarrow$），則 $(A \circ B)$ 也是一個良構公式。
4.  沒有其他公式是良構公式（這是遞歸定義的基礎）。

**例子：**
*   $P$ 是一個良構公式。
*   $\neg P$ 是一個良構公式。
*   $(P \land Q)$ 是一個良構公式。
*   $(\neg P \lor (Q \to R))$ 是一個良構公式。
*   $P \land Q \to R$ **不是**嚴格意義上的良構公式，因為它缺乏足夠的括號來明確解析其結構（例如，是 $(P \land Q) \to R$ 還是 $P \land (Q \to R)$？）。然而，在實踐中，我們通常會使用運算符優先級來省略一些括號（例如，否定優先於合取，合取優先於析取，析取優先於條件和雙條件）。

#### 語義 (Semantics)

**定義：** 語義賦予了良構公式意義，即在給定命題變數的真值賦值下，整個公式的真值。真值表是定義語義的核心工具。

**關聯：** 語法確保了公式的「形狀」是正確的，而語義則定義了這些正確形狀的公式所代表的「意義」（真假值）。沒有語法，就沒有可供解釋的結構；沒有語義，語法結構就失去了其邏輯上的意義。

-----

### 邏輯等價與重言式 (Logical Equivalence and Tautologies)

#### 重言式 (Tautology)

**定義：** 一個命題公式如果在所有可能的真值賦值下其真值都為真，則稱該公式為重言式（或恆真式）。重言式是邏輯上必然為真的陳述。

**例子：**
*   $P \lor \neg P$ (排中律)
    *   無論 $P$ 是真還是假，$P \lor \neg P$ 都為真。
*   $(P \land Q) \to P$
    *   如果 $(P \land Q)$ 為真，則 $P$ 必然為真，所以蘊含式為真。
    *   如果 $(P \land Q)$ 為假，則蘊含式為真。

#### 矛盾式 (Contradiction)

**定義：** 一個命題公式如果在所有可能的真值賦值下其真值都為假，則稱該公式為矛盾式（或恆假式）。矛盾式是邏輯上不可能為真的陳述。

**例子：**
*   $P \land \neg P$ (矛盾律)
    *   無論 $P$ 是真還是假，$P \land \neg P$ 都為假。

#### 可滿足式 (Contingency/Satisfiable Formula)

**定義：** 一個命題公式如果不是重言式也不是矛盾式，即在某些真值賦值下為真，在另一些真值賦值下為假，則稱該公式為可滿足式（或偶真式）。

**例子：**
*   $P \land Q$
    *   當 $P, Q$ 都為真時為真，其他情況為假。
*   $P \to Q$
    *   在 $(P, Q) = (T, F)$ 時為假，其他情況為真。

#### 邏輯等價 (Logical Equivalence, $\equiv$)

**定義：** 兩個命題公式 $A$ 和 $B$ 被稱為邏輯等價（表示為 $A \equiv B$），若且唯若它們在所有可能的真值賦值下具有相同的真值。換句話說，它們的真值表是完全相同的。

**推導/證明方法：**
1.  **真值表法：** 構建 $A$ 和 $B$ 的真值表，如果最終列完全相同，則它們邏輯等價。
2.  **邏輯定律轉換法：** 使用已知的邏輯定律（如德摩根定律、分配律等）將一個公式轉換為另一個公式。

**例子：**
證明 $\neg (P \land Q) \equiv \neg P \lor \neg Q$ (德摩根定律)。

**真值表法：**

| $P$ | $Q$ | $P \land Q$ | $\neg (P \land Q)$ | $\neg P$ | $\neg Q$ | $\neg P \lor \neg Q$ |
| :--: | :--: | :---: | :------------: | :---: | :---: | :------------: |
| T | T | T | F | F | F | F |
| T | F | F | T | F | T | T |
| F | T | F | T | T | F | T |
| F | F | F | T | T | T | T |

觀察 $\neg (P \land Q)$ 和 $\neg P \lor \neg Q$ 的最終列，它們完全相同，因此兩個公式邏輯等價。

**與雙條件的關聯：**
兩個命題公式 $A$ 和 $B$ 邏輯等價 ($A \equiv B$) 當且僅當它們的雙條件公式 $A \leftrightarrow B$ 是一個重言式。

-----

### 重要的邏輯定律 (Important Logical Laws)

這些定律是命題邏輯中進行推理和公式轉換的基礎。

*   **交換律 (Commutative Laws):**
    *   $P \land Q \equiv Q \land P$
    *   $P \lor Q \equiv Q \lor P$

*   **結合律 (Associative Laws):**
    *   $(P \land Q) \land R \equiv P \land (Q \land R)$
    *   $(P \lor Q) \lor R \equiv P \lor (Q \lor R)$

*   **分配律 (Distributive Laws):**
    *   $P \land (Q \lor R) \equiv (P \land Q) \lor (P \land R)$
    *   $P \lor (Q \land R) \equiv (P \lor Q) \land (P \lor R)$

*   **德摩根定律 (De Morgan's Laws):**
    *   $\neg (P \land Q) \equiv \neg P \lor \neg Q$
    *   $\neg (P \lor Q) \equiv \neg P \land \neg Q$

*   **雙重否定律 (Double Negation Law):**
    *   $\neg (\neg P) \equiv P$

*   **恆等律 (Identity Laws):** (T 代表恆真式，F 代表恆假式)
    *   $P \land T \equiv P$
    *   $P \lor F \equiv P$

*   **支配律 (Domination Laws):**
    *   $P \lor T \equiv T$
    *   $P \land F \equiv F$

*   **冪等律 (Idempotent Laws):**
    *   $P \land P \equiv P$
    *   $P \lor P \equiv P$

*   **吸收律 (Absorption Laws):**
    *   $P \land (P \lor Q) \equiv P$
    *   $P \lor (P \land Q) \equiv P$

*   **條件表達 (Implication Equivalence):**
    *   $P \to Q \equiv \neg P \lor Q$
    *   $P \to Q \equiv \neg Q \to \neg P$ (逆否命題)

*   **雙條件表達 (Biconditional Equivalence):**
    *   $P \leftrightarrow Q \equiv (P \to Q) \land (Q \to P)$
    *   $P \leftrightarrow Q \equiv (\neg P \lor Q) \land (\neg Q \lor P)$

-----

### 常見錯誤與澄清

#### 1. 條件語句「如果...那麼...」的日常語義與邏輯語義

**常見錯誤：** 認為「如果 $P$ 則 $Q$」在日常對話中的意義與邏輯學中完全一致。特別是當 $P$ 為假時，人們會誤認為整個語句是無意義的或假的。

**澄清：** 在數理邏輯中，$P \to Q$ 的真值表明確定義：只有 $P$ 真且 $Q$ 假時，$P \to Q$ 才為假。在其他所有情況下，包括 $P$ 為假時，$P \to Q$ 都為真。
*   **例子：** 「如果今天下雨，我就會飛。」
    *   如果今天沒下雨 ($P$ 為假)，那麼無論我會不會飛 ($Q$ 真或假)，這個命題在邏輯上都為真。這可能與直覺不符，因為我們通常認為一個前提為假的陳述，如果結論為真，它「碰巧」是真的；如果結論為假，它就是「胡說八道」。
    *   但在邏輯中，這只是一個技術性定義，旨在保持邏輯系統的簡潔性和內部一致性。它允許我們在抽象層面上處理所有的條件陳述。
    *   這種情況稱為「實質蘊含」(material implication)。

#### 2. 析取語句「或」的排他性與非排他性

**常見錯誤：** 將邏輯「或」（$\lor$）總是理解為「要麼...要麼...」（exclusive or, XOR）。

**澄清：** 數理邏輯中的析取 $\lor$ 是「包含性或」（inclusive or），意味著當兩個命題都為真時，複合命題也為真。
*   **例子：** 「你可以選咖啡或茶。」
    *   在日常對話中，這通常意味著「咖啡和茶只能選一個」（XOR）。
    *   但在邏輯中，如果你選了咖啡，又選了茶（兩者皆選），這句話「你選咖啡或你選茶」仍然為真。
*   如果要表達排他性或，需要使用複合公式，例如 $(P \lor Q) \land \neg (P \land Q)$ 或 $P \leftrightarrow \neg Q$。

#### 3. 否定符號的作用範圍

**常見錯誤：** 錯誤理解 $\neg$ 符號的作用範圍，尤其是在自然語言轉換為邏輯公式時。

**澄清：** 否定符號 $\neg$ 僅作用於緊隨其後的最小良構公式。
*   **例子：**
    *   「不是所有學生都喜歡數學。」
        *   令 $P$ 為「所有學生都喜歡數學」。則正確的邏輯表達是 $\neg P$。
        *   錯誤的理解是將其翻譯成「有些學生不喜歡數學」，這在述詞邏輯中會涉及量詞。但如果我們只停留在命題層面，應該將「所有學生都喜歡數學」作為一個整體命題來否定。
    *   「如果沒有下雨，我們就去野餐。」
        *   令 $P$ 為「下雨」，$Q$ 為「我們去野餐」。
        *   正確的翻譯是 $\neg P \to Q$。
        *   錯誤的翻譯可能是 $\neg (P \to Q)$，這代表「不是『如果下雨，我們就去野餐』」，其真值表完全不同。

-----

### 小練習 (附詳解)

#### 小練習 1: 構建真值表並判斷公式性質

**題目：** 構建命題公式 $(\neg P \land Q) \to (P \lor Q)$ 的真值表，並判斷它是重言式、矛盾式還是可滿足式。

**步驟與詳解：**

1.  **確定獨立命題變數：** 此公式包含 $P$ 和 $Q$ 兩個變數，因此有 $2^2 = 4$ 種真值組合。
2.  **列出所有組合：**

    | $P$ | $Q$ |
    | :--: | :--: |
    | T | T |
    | T | F |
    | F | T |
    | F | F |

3.  **計算各子公式的真值：** 按照優先級從內向外計算。
    *   首先計算 $\neg P$。
    *   然後計算 $(\neg P \land Q)$。
    *   再計算 $(P \lor Q)$。
    *   最後計算整個條件語句 $(\neg P \land Q) \to (P \lor Q)$。

    | $P$ | $Q$ | $\neg P$ | $\neg P \land Q$ | $P \lor Q$ | $(\neg P \land Q) \to (P \lor Q)$ |
    | :--: | :--: | :---: | :----------: | :--------: | :-----------------------------: |
    | T | T | F | F | T | T |
    | T | F | F | F | T | T |
    | F | T | T | T | T | T |
    | F | F | T | F | F | T |

4.  **判斷公式性質：** 觀察最後一列的真值。
    *   所有真值都為 T，表明該公式為真。
    *   **結論：** 該命題公式 $(\neg P \land Q) \to (P \lor Q)$ 是一個**重言式**。

#### 小練習 2: 證明邏輯等價

**題目：** 使用邏輯定律證明 $P \to (Q \to R) \equiv (P \land Q) \to R$。

**步驟與詳解：**

我們將從左側的公式開始，逐步應用邏輯定律將其轉換為右側的公式。

1.  **左側公式：** $P \to (Q \to R)$
2.  **應用條件表達律 ($A \to B \equiv \neg A \lor B$) 於內層條件句：**
    *   $P \to (\neg Q \lor R)$
3.  **再次應用條件表達律於外層條件句：**
    *   $\neg P \lor (\neg Q \lor R)$
4.  **應用結合律 ($(A \lor B) \lor C \equiv A \lor (B \lor C)$) 於析取：**
    *   $(\neg P \lor \neg Q) \lor R$
5.  **應用德摩根定律 ($\neg A \lor \neg B \equiv \neg (A \land B)$)：**
    *   $\neg (P \land Q) \lor R$
6.  **再次應用條件表達律 ($A \to B \equiv \neg A \lor B$)：**
    *   $(P \land Q) \to R$

**結論：** 經過一系列邏輯定律的應用，我們已將左側公式 $P \to (Q \to R)$ 成功轉換為右側公式 $(P \land Q) \to R$。因此，兩個公式邏輯等價。

-----

### 延伸閱讀/參考

學習數理邏輯的旅程遠不止於命題邏輯。命題邏輯主要處理原子命題的真假組合，但它無法表達個體內部的結構或量化概念（如「所有」、「存在」）。為此，我們引入了更強大的工具——述詞邏輯。

**述詞邏輯 (Predicate Logic)：**
述詞邏輯（又稱一階邏輯，First-Order Logic, FOL）擴展了命題邏輯的表達能力，它引入了：
*   **謂詞 (Predicates)：** 表示個體的性質或個體間的關係，如 $P(x)$（$x$ 是人類）、$L(x, y)$（$x$ 愛 $y$）。
*   **個體變數 (Individual Variables)：** 代表個體，如 $x, y, z$。
*   **量詞 (Quantifiers)：**
    *   **全稱量詞 ($\forall$)：** 讀作「對於所有」或「每一個」。例如 $\forall x P(x)$ 表示「所有 $x$ 都具有性質 $P$」。
    *   **存在量詞 ($\exists$)：** 讀作「存在一個」或「至少有一個」。例如 $\exists x P(x)$ 表示「存在一個 $x$ 具有性質 $P$」。

**推薦閱讀材料：**

1.  **《離散數學及其應用》 (Discrete Mathematics and Its Applications)** by Kenneth H. Rosen
    *   這是一本廣泛使用的教材，其中有詳細的數理邏輯章節，涵蓋命題邏輯、述詞邏輯、推理規則等，並包含大量練習題。
2.  **《邏輯學導論》 (Introduction to Logic)** by Patrick Hurley 或 Irving Copi
    *   這些是經典的邏輯學入門教材，從哲學角度介紹邏輯，但其命題邏輯和述詞邏輯部分對理解數理邏輯的基礎非常有幫助。
3.  **線上資源：**
    *   Coursera, edX, MIT OpenCourseware 上有許多關於離散數學、形式邏輯的課程，提供視頻講解和練習。

透過深入學習述詞邏輯，你將能夠處理更複雜的推論，並理解數學證明、程式設計正確性驗證以及人工智能推理系統的基礎。