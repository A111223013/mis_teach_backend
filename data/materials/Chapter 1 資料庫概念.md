# Chapter 1 資料庫概念

本章將帶領讀者進入資料庫的廣闊世界。我們將從最基礎的資料、資訊與知識的區別開始，逐步介紹資料庫的核心概念、其管理系統（DBMS）的功能與重要性，並探討它如何解決傳統檔案系統的種種限制。理解這些基本原理，是掌握後續更複雜資料庫技術的基石。

## 1.1 什麼是資料？資訊？知識？

在學習資料庫之前，首先需要釐清資料、資訊與知識這三個密切相關但意義不同的概念。

### 1.1.1 資料 (Data)

*   **定義：** 原始、未經處理的事實、數字、文字或符號的集合。資料本身沒有內在意義，需經過處理才能變得有用。
*   **核心觀念：** 資料是客觀的，未經解釋或加工的原始素材。
*   **例子：**
    *   數字：`25`、`101`、`2023-10-26`
    *   文字：`王小明`、`台北`、`電腦科學系`
    *   原始感測器讀數：`30.5°C`
*   **與相鄰概念的關聯：** 資料是資訊的原始材料。

### 1.1.2 資訊 (Information)

*   **定義：** 經過處理、組織、結構化後，具有特定意義和價值的資料。資訊能回答特定的問題，幫助人們做出判斷。
*   **核心觀念：** 資訊是對資料賦予語境 (context)、關聯性 (relevance) 和目的 (purpose) 後的結果。
*   **例子：**
    *   `王小明的學號是 101，他隸屬於電腦科學系。` (將多個數據點整合並賦予語境)
    *   `2023 年 10 月 26 日，台北的平均氣溫是 25°C。` (對數據進行計算、歸納並提供時間地點語境)
*   **與相鄰概念的關聯：** 資訊是資料加工後的產物，是知識的基礎。

### 1.1.3 知識 (Knowledge)

*   **定義：** 透過學習、經驗、理解資訊後所形成的洞察力、原則、模式或因果關係。知識具有預測性或指導性，能用來解決問題或做出決策。
*   **核心觀念：** 知識是從資訊中提取出的更高層次的理解，它回答「如何」和「為何」的問題，並能夠應用於新情境。
*   **例子：**
    *   `根據歷年數據分析，修習電腦科學系的學生在基礎程式設計課程中表現優異。` (從大量資訊中歸納出的模式)
    *   `最佳化資料庫查詢效能的原則之一是建立適當的索引。` (對概念和原則的理解，可應用於實踐)
*   **與相鄰概念的關聯：** 知識是從資訊中提取出的更高層次的理解，是決策和創新的基礎。

-----

## 1.2 資料庫 (Database) 的核心概念

### 1.2.1 定義與目的

*   **定義：** 資料庫是一個有組織、結構化且相關聯的資料集合。這些資料通常被儲存於電腦系統中，並經過精心設計，以便於高效地儲存、管理、檢索、更新和維護。
*   **核心觀念：**
    *   **結構化：** 資料以預定的格式和組織方式儲存，例如表格、樹狀結構等，便於程式讀寫。
    *   **相關聯：** 儲存的資料不是孤立的，而是彼此之間存在邏輯上的關係（例如學生資料與選課資料的關聯）。
    *   **共享：** 通常允許多個使用者和應用程式同時存取同一份資料。
    *   **持久性：** 資料被永久儲存，不會因應用程式結束或系統重啟而消失。
*   **目的：**
    *   有效率地儲存和管理大量資料，降低儲存成本。
    *   提供快速且彈性的資料查詢能力，支持複雜的數據分析。
    *   確保資料的一致性、完整性和安全性。
    *   支援多使用者併行存取，提升系統的可用性。
*   **例子：**
    *   一所大學的學生資訊系統中的學生資料庫，包含學生的學號、姓名、科系、成績等。
    *   一家電商網站的產品資料庫，包含產品編號、名稱、價格、庫存量等。
    *   圖書館的書籍資料庫，包含書名、作者、ISBN、出版商等。

### 1.2.2 與相鄰概念的關聯

資料庫是各種資料的「容器」與「倉庫」，它是現代資訊系統的基石。所有對資料的處理、分析和應用都離不開資料庫的支持，是所有更上層應用程式的數據源。

-----

## 1.3 資料庫管理系統 (Database Management System, DBMS)

### 1.3.1 定義與功能

*   **定義：** DBMS 是一套複雜的軟體系統，它提供了一系列工具和服務，允許使用者和應用程式定義、建立、維護、操作和控制對資料庫的存取。簡單來說，DBMS 是用來「管理」資料庫的軟體。
*   **核心功能：**
    1.  **資料定義 (Data Definition, DDL)：** 提供資料定義語言 (Data Definition Language)，讓使用者可以定義資料庫的結構、資料類型、約束（例如主鍵、外鍵、唯一性）和資料之間的關係。
    2.  **資料操縱 (Data Manipulation, DML)：** 提供資料操縱語言 (Data Manipulation Language)，允許使用者進行資料的查詢、插入、更新和刪除操作。
    3.  **資料控制 (Data Control, DCL)：** 提供資料控制語言 (Data Control Language)，用於管理資料庫的使用權限、安全性和交易控制。
    4.  **資料完整性 (Data Integrity)：** 確保資料的準確性、一致性和有效性，例如透過設定約束、觸發器等機制來自動檢查和強制執行數據規則。
    5.  **資料安全性 (Data Security)：** 實施授權機制，限制未經授權的存取，保護資料不被洩露或破壞，確保只有合法使用者能執行特定操作。
    6.  **備份與恢復 (Backup & Recovery)：** 提供資料備份和在系統故障（如停電、硬體損壞）時將資料庫恢復到一致狀態的機制，確保數據的可靠性。
    7.  **併行控制 (Concurrency Control)：** 管理多個使用者同時對資料庫進行讀寫操作，防止資料衝突和不一致，確保多使用者環境下的數據正確性。
    8.  **資料字典/目錄 (Data Dictionary/Catalog)：** 儲存資料庫的元資料（meta-data，即關於資料的資料，如表名、欄位名、數據類型、索引等），DBMS 依賴它來管理資料庫結構。
*   **例子：**
    *   **關聯式 DBMS (RDBMS)：** MySQL, PostgreSQL, Oracle Database, Microsoft SQL Server, SQLite。
    *   **NoSQL DBMS (非關聯式 DBMS)：** MongoDB (文件資料庫), Cassandra (寬列資料庫), Redis (鍵值資料庫)。
*   **推導：** 沒有 DBMS，資料庫就只是一堆雜亂無章的資料檔案；有了 DBMS，資料庫才能發揮其應有的管理效率、安全性、完整性和多使用者支援等功能。

### 1.3.2 與相鄰概念的關聯

資料庫是「儲存內容」，而 DBMS 則是「管理這些內容的軟體工具」。DBMS 扮演著使用者與資料庫之間的橋樑，處理所有底層的資料管理細節，同時為應用程式提供標準化的介面。

-----

## 1.4 為什麼需要資料庫與 DBMS？(傳統檔案系統的限制)

在 DBMS 出現之前，應用程式通常使用傳統的檔案系統（如文本檔案、試算表檔案）來儲存和管理資料。然而，檔案系統在處理複雜、大量且多使用者共享的資料時，存在許多嚴重的問題。

*   **定義：** 闡述傳統檔案系統在資料管理上的固有缺陷，進而凸顯資料庫系統的優勢。
*   **問題點與推導：**
    1.  **資料冗餘 (Data Redundancy) 與 資料不一致性 (Data Inconsistency)：**
        *   **問題：** 相同的資料可能在不同的檔案中重複儲存。當資料需要更新時，如果不是所有副本都同時更新，就會導致資料不一致。
        *   **例子：** 學生資訊在學籍管理系統的檔案中有一份，在圖書館借閱系統的檔案中又有一份。若學生地址更改，只更新了學籍系統的檔案，圖書館系統中的地址就變成了過時的資料。
    2.  **資料獨立性不足 (Lack of Data Independence)：**
        *   **問題：** 應用程式的程式碼往往與其所存取的資料檔案的物理儲存結構或邏輯結構緊密耦合。一旦資料的儲存格式或結構發生變化，相關的應用程式也必須修改，維護成本高昂。
        *   **例子：** 如果學生檔案中新增一個「Email」欄位，所有直接讀取該檔案的應用程式可能都需要修改，因為它們依賴於舊的檔案結構。
    3.  **資料共用與併行存取困難 (Difficulty in Data Sharing & Concurrent Access)：**
        *   **問題：** 檔案系統通常只提供簡單的檔案鎖定機制，難以有效管理多個使用者同時存取或修改同一份資料，容易導致資料衝突或損壞。
        *   **例子：** 兩位老師同時嘗試更新同一位學生的成績，如果沒有妥善的併行控制機制，可能會導致其中一位老師的更新被覆蓋，數據丟失。
    4.  **安全性與完整性差 (Poor Security & Integrity)：**
        *   **問題：** 檔案系統缺乏內建的精細存取控制（例如只允許讀取特定欄位、只允許特定使用者修改），也難以強制執行複雜的資料完整性規則（例如學號必須唯一、成績必須在 0 到 100 之間）。
        *   **例子：** 任何能存取學生檔案的使用者都可以看到所有學生的所有資料，無法設定權限讓某人只能看學號和姓名。
    5.  **程式開發複雜度高 (Increased Program Development Complexity)：**
        *   **問題：** 開發者需要自行編寫程式碼來處理資料的存取、組織、錯誤檢查、安全性、備份和恢復等所有細節，增加了開發負擔和程式碼量。
        *   **例子：** 應用程式開發者需要自己寫程式來搜尋檔案、解析資料格式、驗證數據有效性、確保資料不重複、處理多使用者存取等。

### 1.4.1 與相鄰概念的關聯

DBMS 正是為了解決這些傳統檔案系統的限制而設計的。它提供了一個統一的、受控的環境來管理資料，從而實現了更高的效率、可靠性、安全性和資料一致性。

-----

## 1.5 資料庫的特性 (Characteristics of a Database)

現代資料庫系統之所以如此強大和普及，得益於它所具備的一系列關鍵特性。這些特性是 DBMS 為資料庫提供的核心價值。

### 1.5.1 資料獨立性 (Data Independence)

*   **定義：** 指資料的定義與使用它的應用程式相互獨立，變動其中一方不會影響另一方。這是資料庫最重要的特性之一，它大大降低了系統的維護成本和複雜性。
*   **核心觀念：**
    *   **物理資料獨立性 (Physical Data Independence)：** 內部層（物理儲存結構）的改變不會影響概念層和外部層。例如，改變資料的儲存方式、使用不同的檔案組織方法或新增索引，應用程式不需要修改。
    *   **邏輯資料獨立性 (Logical Data Independence)：** 概念層（邏輯結構）的改變不會影響外部層。例如，在資料表中新增一個欄位或修改某個欄位的資料類型，現有的應用程式如果沒有用到這些變動的欄位，通常不需要修改。
*   **例子：**
    *   **物理獨立性：** 資料庫管理員決定將學生資料從一個硬碟移動到另一個硬碟，或者改變資料的物理儲存順序以提升效能，學生查詢系統（應用程式）仍然能正常運行，無需任何修改。
    *   **邏輯獨立性：** 在學生資料表中新增一個「緊急聯絡人電話」欄位，現有的查詢「所有學生的姓名和學號」的應用程式不受影響。

### 1.5.2 資料完整性 (Data Integrity)

*   **定義：** 確保資料的準確性、一致性和有效性。透過定義一系列的約束和規則來實現。
*   **核心觀念：** 完整性確保資料在任何時候都是可靠的，符合預設的業務邏輯和數據規則。
*   **例子：**
    *   **實體完整性 (Entity Integrity)：** 學生學號必須是唯一的，且不能為空值 (NULL)。
    *   **參考完整性 (Referential Integrity)：** 選課表中的學號必須在學生表中實際存在。
    *   **域完整性 (Domain Integrity)：** 學生的成績必須介於 0 到 100 之間；出生日期必須是一個合法的日期格式。

### 1.5.3 資料安全性 (Data Security)

*   **定義：** 保護資料不被未經授權的存取、修改或破壞。
*   **核心觀念：** 透過使用者身份驗證 (Authentication)、授權管理 (Authorization)、加密 (Encryption) 等機制來實現，嚴格控制誰可以對哪些資料進行什麼操作。
*   **例子：** 只有教務處的員工才能修改學生的學籍資料；一般教師只能查詢學生的成績，但不能修改；學生只能查詢自己的成績和課表。

### 1.5.4 資料共享 (Data Sharing) 與 併行控制 (Concurrency Control)

*   **定義：**
    *   **資料共享：** 允許多個使用者和應用程式同時存取同一份資料，提高資源利用率。
    *   **併行控制：** 管理多個使用者同時對資料庫進行讀寫操作，以確保資料的一致性和隔離性，防止資料衝突。
*   **核心觀念：** 在多使用者環境中，併行控制是確保資料正確性的關鍵。
*   **例子：** 多位圖書館館員可以同時查詢書籍的館藏狀態。當兩位館員同時嘗試借出同一本書時，併行控制機制會確保只有其中一位操作成功，另一個操作可能被延遲或告知衝突，以避免庫存數據出錯。

### 1.5.5 資料回復 (Data Recovery)

*   **定義：** 在系統故障（如停電、硬體損壞、軟體錯誤）時，能夠將資料庫恢復到之前的一個一致且正確的狀態。
*   **核心觀念：** 透過日誌 (log)、備份 (backup) 和檢查點 (checkpoint) 等機制來實現，確保資料的持久性。
*   **例子：** 資料庫系統在更新過程中突然斷電，重啟後 DBMS 會自動利用日誌檔將未完成的交易回溯 (undo) 或重做 (redo)，確保資料回到故障前的一致狀態。

### 1.5.6 與相鄰概念的關聯

這些特性共同構成了現代資料庫管理系統的強大功能，是其解決傳統檔案系統問題的基石。它們確保了資料的可靠性、可用性、易管理性和高效性。

-----

## 1.6 資料庫的三層架構 (Three-Schema Architecture)

資料庫的三層架構（又稱 ANSI/SPARC 架構）是資料庫系統設計的一個基本概念，它為實現資料獨立性提供了理論基礎。

### 1.6.1 定義與構成

*   **定義：** 這是一個將資料庫結構分成三個抽象層次的模型，每個層次都為不同類型的使用者或應用程式提供了不同的資料視圖，從而隔離了使用者對資料庫結構的認識與底層儲存實現。
*   **三層構成：**
    1.  **外部層 (External Schema / View Level)：**
        *   **定義：** 也稱為使用者視圖或子模式。這是資料庫中離使用者最近的層次，描述了使用者或應用程式所看到和互動的資料部分。每個使用者或應用程式可能有自己獨特的外部視圖，只包含他們感興趣的、且經過客製化的資料。
        *   **特性：** 隱藏了資料庫的其餘部分以及底層的儲存細節，提供高度的抽象化，同時也是實現安全性和客製化的手段。
        *   **例子：** 學生的成績查詢系統可能只顯示學生的學號、姓名、課程名稱和成績，而隱藏了學生的住址、電話等個人資訊，以及所有與成績無關的資料。
    2.  **概念層 (Conceptual Schema / Logical Level)：**
        *   **定義：** 也稱為邏輯模式。這是整個資料庫的全局邏輯結構，描述了資料庫中所有資料、它們之間的關係、屬性以及所有資料完整性約束，與資料的物理儲存細節無關。它是資料庫設計師和資料庫管理員關心的層次。
        *   **特性：** 獨立於任何特定的應用程式和底層物理儲存，代表了組織對所有資料的整體一致性視圖。
        *   **例子：** 學校資料庫的概念模式可能定義了「學生」、「課程」、「選課」等實體，以及它們之間的關聯（例如「學生選修課程」），並定義了每個實體的屬性（如學生有學號、姓名、科系）和約束（如學號唯一）。
    3.  **內部層 (Internal Schema / Physical Level)：**
        *   **定義：** 也稱為物理模式。這是離硬體最近的層次，描述了資料庫中資料的物理儲存結構，包括資料是如何儲存在磁碟上、檔案的組織方式、索引的建立、記錄的物理位置等。
        *   **特性：** 與特定的 DBMS 軟體、硬體和作業系統相關，是資料庫管理系統實際處理資料的層次，優化存取效率是此層的主要考量。
        *   **例子：** 學生資料的物理儲存是採用 B+ 樹索引，儲存在某個特定的磁碟區塊中，記錄是按照學號排序等。

### 1.6.2 推導與目的

*   **目的：** 三層架構的主要目標是實現**資料獨立性**。
    *   **邏輯資料獨立性：** 概念層的改變不會影響外部層。例如，在概念層的學生表中新增一個欄位，如果外部層的視圖沒有用到這個新欄位，那麼外部層的應用程式不需要修改。
    *   **物理資料獨立性：** 內部層的改變不會影響概念層和外部層。例如，改變資料的儲存方式、使用更快的索引技術，概念層和外部層的視圖和應用程式都不受影響。
*   **好處：**
    *   提高了資料庫系統的靈活性和可維護性。
    *   簡化了應用程式開發，因為開發者可以專注於概念層或外部層，無需關心底層的儲存細節。
    *   增強了資料安全性，因為使用者只看到他們被授權的資料視圖。

### 1.6.3 與相鄰概念的關聯

三層架構是實現資料庫資料獨立性的關鍵模型，是理解 DBMS 如何管理資料、抽象化複雜性的重要框架。它將使用者、資料庫的邏輯結構和物理儲存機制明確分離開來，使得各層次的修改可以獨立進行，降低了系統的耦合度。

-----

## 1.7 常見錯誤與澄清

*   **資料庫 (Database) 與 資料庫管理系統 (DBMS) 的混淆：**
    *   **錯誤：** 許多人會將「資料庫」與「資料庫管理系統」混為一談，例如說「我的資料庫是 MySQL」。
    *   **澄清：** **資料庫 (Database)** 是一個有組織的資料集合，是「資料本身」。**資料庫管理系統 (DBMS)** 是一個軟體，用來創建、管理和操作資料庫，是「管理資料的工具」。所以，正確的說法應該是「我使用 MySQL (DBMS) 來管理我的資料 (資料庫)」。MySQL 是一個 DBMS 產品，它能管理一個或多個資料庫。
*   **資料冗餘一定不好嗎？：**
    *   **錯誤：** 認為資料冗餘在任何情況下都是完全負面的，必須完全消除。
    *   **澄清：** 在大多數事務處理系統 (OLTP) 中，過度的資料冗餘確實會導致資料不一致和儲存浪費，應盡量避免。然而，在某些特定的應用場景，例如資料倉儲 (Data Warehouse) 或報表生成系統中，有時會為了查詢效能而刻意引入有限的冗餘（例如資料去正規化），以減少複雜的關聯查詢。但原則上，對於一般資料庫設計，仍應遵循正規化原則來減少不必要的冗餘。
*   **檔案系統完全無法管理資料嗎？：**
    *   **錯誤：** 認為檔案系統毫無用處，完全不能用於管理任何資料。
    *   **澄清：** 檔案系統對於非結構化資料（如圖片、影片、文件檔案）或小規模、單一使用者、不需複雜查詢的資料管理仍然是有效的。資料庫的優勢主要體現在需要結構化、大量、多使用者併行存取、高一致性和高安全性的資料管理場景。許多資料庫系統本身也依賴底層的檔案系統來儲存其資料檔案。

-----

## 1.8 小練習 (附詳解)

### 練習一：資料庫概念辨識

假設你正在規劃一個線上書店的資料管理系統。請根據本章所學的資料庫概念，回答以下問題：

1.  書店的「會員資料」（會員 ID、姓名、地址、電子郵件）和「書籍資料」（ISBN、書名、作者、價格、庫存量）分別代表了資料庫中的哪種基本元素？它們是「資料」還是「資訊」？請簡述理由。
2.  如果你希望在會員註冊時，每個會員的電子郵件地址都是唯一的，並且在資料庫中能自動強制這一點，這是資料庫的哪一個核心特性在發揮作用？
3.  為了管理和存取這些會員和書籍資料，你決定使用 `MariaDB`。`MariaDB` 在這個情境中扮演的角色是什麼？
4.  書店老闆希望未來可以隨時為書籍資料新增一個「出版社連絡電話」欄位，但不希望這個變動影響到目前負責顯示書籍資訊給顧客的網頁應用程式。這體現了資料庫的哪一個重要特性？

### 詳解一：

1.  **「會員資料」和「書籍資料」都屬於資料庫中的「資料」集合。**
    *   **理由：** 這些是關於會員和書籍的原始事實、未經處理的數據。它們本身是客觀的紀錄。當這些資料被查詢、過濾或整理以回答特定問題（例如「王小明會員最近買了哪些書？」、「哪本書是某出版社出版的？」）時，它們就轉化為對使用者有意義的「資訊」。
2.  **這是資料庫的「資料完整性 (Data Integrity)」特性。**
    *   **理由：** 確保電子郵件地址的唯一性是透過設定唯一約束（Unique Constraint）來實現的，這是資料庫為了保證數據正確性和一致性所強制執行的一種完整性規則。
3.  **`MariaDB` 在這個情境中扮演「資料庫管理系統 (DBMS)」的角色。**
    *   **理由：** `MariaDB` 是一個開源的關聯式 DBMS 產品，它提供了一系列功能來定義、建立、操作和管理書店的資料庫，包括處理 SQL 查詢、管理數據儲存、確保安全性和併行存取等。
4.  **這體現了資料庫的「邏輯資料獨立性 (Logical Data Independence)」特性。**
    *   **理由：** 新增欄位屬於概念層（邏輯結構）的變化。如果網頁應用程式（外部層）沒有用到這個新欄位，那麼它就不應受影響而需要修改，這正是邏輯資料獨立性所保障的：概念層的變動不影響外部層的視圖和應用程式。

-----

## 1.9 延伸閱讀

*   **C.J. Date, "An Introduction to Database Systems"**
    *   被譽為資料庫領域的經典之作，對資料庫理論和概念有極其深入且嚴謹的探討。適合對資料庫原理有深厚興趣的讀者，但對初學者而言可能較為學術。
*   **Abraham Silberschatz, Henry F. Korth, S. Sudarshan, "Database System Concepts"**
    *   一本廣泛使用的入門級教科書，內容全面，涵蓋了資料庫系統的各個方面，包括理論、設計、實作和應用。對於大學課程而言，這是一個非常好的學習資源。
*   **Ramakrishnan, Raghu, and Johannes Gehrke, "Database Management Systems"**
    *   另一本大學級別的標準教材，注重於資料庫系統的內部機制和實作細節，對於理解 DBMS 的運作原理非常有幫助。其解釋清晰，例子豐富。
*   **Wikipedia: 資料庫管理系統, 資料獨立性, 關係資料庫**
    *   對於快速查詢和理解基本概念，維基百科是一個很好的資源，其條目通常包含清晰的定義和簡潔的解釋。但建議作為初步了解，不宜作為深入學習的唯一來源。