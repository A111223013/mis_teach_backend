# 1-1 資料庫的由來：從混亂到秩序

## ### 核心概念：為什麼我們需要資料庫？

在電腦普及的早期，資料儲存和管理面臨著許多挑戰。想像一下，如果你有一堆散亂的文件，每份文件都記錄著不同的資訊，但又有些資訊是重複的，當你需要查找或更新某個特定資訊時，你會遇到什麼問題？

這正是資料庫誕生的原因：它提供了一個有組織、有效率且可靠的方式來儲存、管理和檢索大量資訊。它的核心目標是解決早期檔案管理系統所遇到的種種困境。

-----

## ### 典型例子與轉換：從檔案管理系統到資料庫

在資料庫系統出現之前，資料主要是透過「檔案管理系統」（File Management System）來儲存和處理的。每個應用程式通常有自己獨立的資料檔案。

#### #### 檔案管理系統的運作方式

假設一間小型公司「創新科技」需要管理員工資料和專案資料。他們可能會這樣做：
*   **員工資料**：儲存在一個 `employees.txt` 或 `employees.csv` 檔案中，記錄員工ID、姓名、部門、職稱、薪資等。
*   **專案資料**：儲存在一個 `projects.txt` 檔案中，記錄專案ID、名稱、負責人（員工姓名）、預算等。
*   **部門資料**：可能在另一個 `departments.txt` 檔案中，記錄部門ID、名稱、主管（員工姓名）等。

當應用程式需要資料時，就直接讀取這些檔案。

#### #### 檔案管理系統的瓶頸

這種方式在資料量不大、應用程式功能單純時尚可運作，但隨著資料量的增加和應用程式需求的複雜化，問題便層出不窮：

1.  **資料重複性 (Data Redundancy)**
    *   **定義**：相同的資料儲存在不同的檔案或不同的應用程式中。
    *   **例子**：員工「王小明」的姓名、部門可能同時出現在 `employees.txt`、`projects.txt` (作為專案負責人) 和 `departments.txt` (作為部門主管) 中。
    *   **推導至問題**：當王小明的部門變動時，必須更新所有相關檔案，容易遺漏。

2.  **資料不一致性 (Data Inconsistency)**
    *   **定義**：由於資料重複且未同步更新，導致同一筆資料在不同地方儲存了不同的值。
    *   **例子**：`employees.txt` 中王小明的部門是「研發部」，但 `projects.txt` 中仍顯示為「工程部」，兩者不一致。
    *   **推導至問題**：系統無法確定哪一份資料是正確的，造成錯誤的決策。

3.  **資料隔離 (Data Isolation)**
    *   **定義**：不同應用程式或不同檔案格式的資料難以整合或共用。
    *   **例子**：若要查詢「研發部所有專案的預算總和，並列出負責的員工薪資」，由於資料分散在多個檔案中且可能格式不一，處理起來非常困難。
    *   **推導至問題**：難以實現複雜的查詢和報表，限制了資料的價值。

4.  **資料完整性問題 (Data Integrity Problems)**
    *   **定義**：難以實施和維護資料的正確性規則（例如：員工ID必須是唯一的、薪資不能是負數）。
    *   **例子**：在 `employees.txt` 中不小心輸入了兩個相同的員工ID，或輸入了不合邏輯的薪資。
    *   **推導至問題**：錯誤的資料會污染整個系統。

5.  **資料安全性問題 (Data Security Problems)**
    *   **定義**：難以對不同使用者進行細緻的權限控制（例如：只有主管能查看薪資，但所有人都能查看部門）。
    *   **例子**：檔案通常只有「讀/寫」兩種權限，無法精確到特定欄位或特定列。
    *   **推導至問題**：敏感資料容易外洩。

6.  **並行存取問題 (Concurrency Access Problems)**
    *   **定義**：當多個使用者或應用程式同時嘗試修改同一份檔案時，容易發生資料錯誤或遺失。
    *   **例子**：兩個員工同時嘗試更新 `employees.txt` 中不同員工的薪資，可能會導致其中一方的修改被覆蓋。
    *   **推導至問題**：多使用者環境下系統無法穩定運作。

#### #### 革命性的轉變：資料庫管理系統 (DBMS) 的誕生

為了解決上述問題，人們開始研究更高效、更安全的資料儲存和管理方式，最終催生了「資料庫管理系統 (Database Management System, DBMS)」。

**資料庫管理系統**是一種軟體，它提供了一套標準化的方法來定義、創建、查詢、更新和管理資料。它將資料本身與應用程式分離，並負責處理所有的資料存取和管理細節。

**核心思想**：
*   **集中化管理**：所有資料統一由 DBMS 管理，減少重複。
*   **資料抽象化**：使用者和應用程式無需關心資料的物理儲存細節。
*   **資料獨立性**：資料結構的改變不會影響應用程式，反之亦然。
*   **強大的控制**：提供資料完整性、安全性、並行控制和錯誤恢復機制。

-----

## ### 與相鄰概念的關聯

*   **作業系統 (Operating System)**：資料庫系統建立在作業系統之上，利用作業系統提供的檔案系統、記憶體管理和行程管理等功能來儲存和處理資料。然而，資料庫系統提供了比作業系統檔案系統更高級別的資料管理抽象和功能。
*   **應用程式開發 (Application Development)**：資料庫的出現將資料管理與應用程式的商業邏輯分離。開發者可以專注於應用程式功能，而將資料的持久化和管理交由資料庫系統處理，大大簡化了應用程式的開發和維護。
*   **資訊管理與資料倉儲 (Information Management & Data Warehousing)**：資料庫是所有資訊管理系統的基石。隨著時間的推移，當需要分析大量歷史資料以支持決策時，資料庫的技術演進也促成了資料倉儲、商業智慧 (BI) 和大數據分析等領域的發展。

-----

## ### 進階內容：早期資料庫模型

在關聯式資料庫（Relational Database）主宰市場之前，曾有幾種早期的資料庫模型嘗試解決檔案管理的問題：

1.  **階層式模型 (Hierarchical Model)**
    *   **概念**：資料以樹狀結構組織，每個父節點可以有多個子節點，但每個子節點只能有一個父節點。
    *   **代表系統**：IBM IMS (Information Management System)，於1960年代末開發。
    *   **優點**：結構簡單，查詢特定路徑下的資料效率高。
    *   **缺點**：關係受限於層次結構，難以表達多對多關係，修改結構困難。

2.  **網路模型 (Network Model)**
    *   **概念**：是階層式模型的延伸，允許一個子節點擁有多個父節點，形成網狀結構。
    *   **代表系統**：CODASYL（資料系統語言會議）規範的DBTG模型。
    *   **優點**：比階層式模型更能表達複雜關係，查詢靈活性更高。
    *   **缺點**：結構複雜，使用者需要了解資料的物理儲存路徑才能存取，程式與資料耦合度高。

這些早期模型雖然提供了一些資料組織的能力，但其複雜性和靈活性不足，直到1970年 **Edgar F. Codd** 博士提出了革命性的**關聯式模型 (Relational Model)**，才奠定了現代資料庫的基礎。關聯式模型以其簡潔的數學基礎（集合論）、易於理解的表狀結構和強大的查詢語言（SQL）迅速取代了其他模型，成為主流。

-----

## ### 常見錯誤與澄清

1.  **「資料庫就是一個 Excel 表格。」**
    *   **澄清**：Excel 或 Google Sheets 確實是用表格來儲存資料，可以看作是一種非常簡單的、單一使用者的「檔案」。然而，一個真正的資料庫（尤其是關聯式資料庫）是一套完整的管理系統 (DBMS)。它不僅能儲存多個表格，還能定義表格之間的關聯、執行複雜的查詢、管理多使用者並行存取、提供資料安全性、完整性、備份與恢復等功能，這些都是 Excel 無法提供的。

2.  **「SQL 就是資料庫。」**
    *   **澄清**：SQL (Structured Query Language) 是一種用於與資料庫（主要是關聯式資料庫）互動的語言，用於查詢、插入、更新和刪除資料，以及管理資料庫結構。SQL 只是資料庫系統的一部分，或者說是一種介面，而不是資料庫本身。資料庫是一個儲存和管理資料的實體，而 SQL 則是與之對話的工具。

3.  **「所有資料庫都長得一樣。」**
    *   **澄清**：雖然關聯式資料庫（如 MySQL, PostgreSQL, SQL Server, Oracle）是最常見的，但還有許多其他類型的資料庫，稱為 NoSQL 資料庫，例如文件型資料庫 (MongoDB)、鍵值儲存 (Redis)、圖形資料庫 (Neo4j) 等。它們在資料模型、儲存方式和適用場景上都有顯著差異。

-----

## ### 小練習（附詳解）

#### #### 練習情境

你是一家小型線上書店的員工，負責管理書籍和顧客資料。目前，你使用兩個 Excel 檔案來記錄資料：

1.  **`Books.xlsx` (書籍資料)**
    *   欄位：`BookID`, `Title`, `Author`, `Price`, `Stock`, `Publisher`

2.  **`Customers.xlsx` (顧客資料)**
    *   欄位：`CustomerID`, `Name`, `Email`, `Address`, `PreferredGenre`

現在，老闆想新增一個「訂單」功能，並希望記錄顧客購買了哪些書籍。你決定新增第三個檔案：

3.  **`Orders.xlsx` (訂單資料)**
    *   欄位：`OrderID`, `CustomerID`, `CustomerName`, `BookID`, `BookTitle`, `Quantity`, `OrderDate`

請根據上述情境，識別出這種檔案管理方式可能導致的至少 3 種資料庫「由來」中所提到的問題，並說明原因。

#### #### 詳解

1.  **問題：資料重複性 (Data Redundancy)**
    *   **步驟 1：識別重複資料**
        *   在 `Orders.xlsx` 中，`CustomerID` 和 `CustomerName` 欄位都重複儲存了顧客的資訊，而這些資訊在 `Customers.xlsx` 中已經存在。
        *   同樣地，`BookID` 和 `BookTitle` 在 `Orders.xlsx` 中也重複儲存了書籍的資訊，而這些資訊在 `Books.xlsx` 中已經存在。
    *   **步驟 2：說明重複性導致的問題**
        *   這導致資料儲存空間的浪費。
        *   更重要的是，當顧客的姓名、電子郵件或書籍的標題、價格發生變化時，你必須同時更新 `Customers.xlsx` 和 `Orders.xlsx` (針對顧客資料) 或 `Books.xlsx` 和 `Orders.xlsx` (針對書籍資料)。這增加了更新的複雜度。

2.  **問題：資料不一致性 (Data Inconsistency)**
    *   **步驟 1：設想變動情境**
        *   假設顧客「張三」改了名字，你在 `Customers.xlsx` 中更新了他的名字，但忘記更新 `Orders.xlsx` 中舊訂單的 `CustomerName`。
        *   或者，一本暢銷書的 `Title` 略有修改，你在 `Books.xlsx` 中更新了，但之前所有已建立的訂單在 `Orders.xlsx` 中仍然顯示舊的 `BookTitle`。
    *   **步驟 2：說明不一致性導致的問題**
        *   這會導致資料來源的混淆。老闆或員工查詢時，會看到關於同一個顧客或同一本書的不同名稱，不知道哪個才是正確的，造成資訊錯誤。

3.  **問題：資料隔離 (Data Isolation)**
    *   **步驟 1：設想複雜查詢需求**
        *   老闆想知道「所有購買過《資料庫概論》這本書的顧客中，居住在台北市且他們偏好『科幻小說』的顧客有誰？」
        *   或者「暢銷書作者『李華』的所有書籍，它們的總庫存量是多少？」
    *   **步驟 2：說明隔離導致的問題**
        *   要回答這些問題，你需要手動打開 `Books.xlsx`、`Customers.xlsx` 和 `Orders.xlsx` 三個檔案，透過 `BookID` 和 `CustomerID` 逐一比對查找，這將是一個耗時且容易出錯的過程。如果資料量更大，幾乎不可能完成。
        *   不同檔案之間缺乏直接、自動化的連接機制，使得從多個來源獲取聚合資訊變得非常困難。

-----

## ### 延伸閱讀/參考

*   **《資料庫系統概念》(Database System Concepts)**：通常是大學資料庫課程的經典教材，詳細介紹資料庫的發展歷史、各個模型及實作細節。
*   **Edgar F. Codd 的原始論文**：”A Relational Model of Data for Large Shared Data Banks” (1970)。這篇論文奠定了關聯式資料庫的理論基礎，非常有歷史意義。
*   **W3Schools - SQL Tutorial**：入門級的 SQL 教學網站，可以讓讀者體驗如何與關聯式資料庫互動。
    *   [https://www.w3schools.com/sql/](https://www.w3schools.com/sql/)
*   **IBM 歷史文獻 - IMS**: 了解最早的商用資料庫之一，階層式資料庫的代表。
    *   [https://www.ibm.com/ibm/history/exhibits/mainframe/mainframe_ERP_IMS.html](https://www.ibm.com/ibm/history/exhibits/mainframe/mainframe_ERP_IMS.html)