# 互斥或閘 (XOR Gate) 與 互斥反或閘 (XNOR Gate)

### 1. 導論：二進制邏輯閘的基石

數位電路的核心是邏輯閘，它們根據一個或多個二進制輸入（0 或 1）產生一個二進制輸出。我們熟悉的 AND、OR、NOT 閘構成了基本的邏輯操作。然而，在許多實際應用中，例如算術運算、數據比較和錯誤檢測，我們需要更複雜但極其高效的邏輯功能。互斥或閘 (XOR) 與互斥反或閘 (XNOR) 正是為此而生，它們在數位系統設計中扮演著關鍵角色。本章節將深入探討這兩種特殊邏輯閘的核心概念、運作方式及其在實際應用中的重要性。

-----

### 2. 互斥或閘 (XOR Gate)

#### 2.1 核心概念與定義

**核心觀念：** 互斥或閘，簡稱 XOR 閘，其輸出為「真 (1)」的條件是**兩個輸入不相同**。換句話說，當且僅當兩個輸入之一為真，另一個為假時，輸出才為真。如果兩個輸入都為真或都為假，則輸出為假 (0)。

*   **布林符號：** $\oplus$
*   **讀法：** A XOR B，或 A 互斥或 B
*   **真值表：**

| 輸入 A | 輸入 B | 輸出 Q ($A \oplus B$) |
| :----: | :----: | :---------------------: |
|   0    |   0    |            0            |
|   0    |   1    |            1            |
|   1    |   0    |            1            |
|   1    |   1    |            0            |

*   **邏輯符號：**

    ```
    ┌───┐
    ─┤   |
    ─┤ >═╡─── Q
    ┌───┘
    ```
    (ANSI/IEEE 符號：帶有雙線弧的 OR 閘)

#### 2.2 典型例子與布林代數表示

**布林表達式推導：**
根據真值表，我們可以看到輸出 Q 為 1 的兩種情況是：
1.  A=0, B=1 (即 $\bar{A}B$)
2.  A=1, B=0 (即 $A\bar{B}$)

因此，XOR 閘的布林表達式為：
$Q = A \oplus B = A\bar{B} + \bar{A}B$

**應用例子：**

*   **位元比較器：** XOR 閘是基本的位元比較器。如果兩個位元相等 (0=0 或 1=1)，輸出為 0；如果不同 (0!=1 或 1!=0)，輸出為 1。這在數據比較電路中非常有用。
*   **半加器 (Half Adder)：** 在二進制加法中，一個半加器接受兩個輸入位元，並產生一個和 (Sum) 和一個進位 (Carry)。其中，**和位元 (Sum)** 的邏輯正是由 XOR 閘實現的。
    *   Sum = $A \oplus B$
    *   Carry = $A \cdot B$
*   **奇偶校驗生成器/檢測器：** 多個 XOR 閘可以串聯或並聯，用於檢測一串二進制數據中 1 的個數是奇數還是偶數。例如，三輸入 XOR 閘 $A \oplus B \oplus C$ 的輸出為 1，當且僅當 A, B, C 中有奇數個 1。

#### 2.3 與相鄰概念的關聯

*   **與或閘 (OR) 的區別：**
    *   OR 閘 (A+B) 的輸出為 1 的條件是「至少一個輸入為 1」。
    *   XOR 閘 ($A \oplus B$) 的輸出為 1 的條件是「恰好一個輸入為 1」。
    *   主要區別在於：當兩個輸入都為 1 時，OR 輸出 1，而 XOR 輸出 0。可以理解為 XOR 是「排他性」的 OR。

*   **使用 NAND 閘實現 XOR 閘：**
    NAND 閘是一種通用閘，可以構建任何邏輯功能。一個 XOR 閘可以由四個 NAND 閘實現：
    1.  $(A \text{ NAND } B) = \overline{AB}$
    2.  $(A \text{ NAND } \overline{AB}) = \overline{A\overline{AB}}$
    3.  $(B \text{ NAND } \overline{AB}) = \overline{B\overline{AB}}$
    4.  $(\overline{A\overline{AB}} \text{ NAND } \overline{B\overline{AB}}) = \overline{\overline{A\overline{AB}} \cdot \overline{B\overline{AB}}} = \overline{\overline{A(\bar{A}+\bar{B})} \cdot \overline{B(\bar{A}+\bar{B})}}$
        簡化後得到 $A\bar{B} + \bar{A}B = A \oplus B$。
        這個結構在實際電路設計中很常見。

-----

### 3. 互斥反或閘 (XNOR Gate)

#### 3.1 核心概念與定義

**核心觀念：** 互斥反或閘，簡稱 XNOR 閘，其輸出為「真 (1)」的條件是**兩個輸入相同**。換句話說，如果兩個輸入都為真或都為假，則輸出為真。如果兩個輸入不同，則輸出為假 (0)。它是 XOR 閘的反相。

*   **布林符號：** $\odot$ 或 $\overline{\oplus}$ (讀作 XNOR)
*   **讀法：** A XNOR B，或 A 互斥反或 B
*   **真值表：**

| 輸入 A | 輸入 B | 輸出 Q ($A \odot B$) |
| :----: | :----: | :---------------------: |
|   0    |   0    |            1            |
|   0    |   1    |            0            |
|   1    |   0    |            0            |
|   1    |   1    |            1            |

*   **邏輯符號：**

    ```
    ┌───┐
    ─┤   |
    ─┤ >═╡o── Q
    ┌───┘
    ```
    (ANSI/IEEE 符號：帶有雙線弧的 OR 閘，輸出帶有反相圓圈)

#### 3.2 典型例子與布林代數表示

**布林表達式推導：**
根據真值表，我們可以看到輸出 Q 為 1 的兩種情況是：
1.  A=0, B=0 (即 $\bar{A}\bar{B}$)
2.  A=1, B=1 (即 $AB$)

因此，XNOR 閘的布林表達式為：
$Q = A \odot B = AB + \bar{A}\bar{B}$

**應用例子：**

*   **相等比較器：** XNOR 閘是極佳的相等比較器。如果兩個位元相等 (0=0 或 1=1)，輸出為 1；如果不同 (0!=1 或 1!=0)，輸出為 0。這在微處理器中用於判斷兩個數據是否相同。
*   **數據加密/解密：** XOR/XNOR 閘在簡單的對稱密鑰加密算法中被用於位元操作，因為它們具有可逆性：$(A \oplus K) \oplus K = A$。
*   **奇偶校驗檢測器：** 如果使用 XOR 閘來生成奇偶校驗位，那麼在接收端，將所有數據位和奇偶校驗位一起輸入一串 XNOR 閘（或 XOR 閘組合），最終輸出將指示數據是否正確（無錯誤）。

#### 3.3 與相鄰概念的關聯

*   **與 XOR 的關係：**
    *   XNOR 閘是 XOR 閘的邏輯反相。
    *   $A \odot B = \overline{A \oplus B}$
    *   因此，任何 XOR 閘的輸出連接到一個 NOT 閘，就形成了 XNOR 閘；反之亦然。

*   **使用 NOR 閘實現 XNOR 閘：**
    與 NAND 閘類似，NOR 閘也是通用閘。一個 XNOR 閘可以由五個 NOR 閘實現，或者由四個 NOR 閘加上一個額外的反相器（如果允許）。更直接的方式是利用其布林表達式 $AB + \bar{A}\bar{B}$，透過德摩根定律和 NOR 閘的特性來實現。
    一個更簡潔的實現是使用三個 NAND 閘和一個 NOR 閘。

-----

### 4. 進階內容：組合應用與特性

#### 4.1 多輸入 XOR/XNOR 閘 (奇偶檢測)

雖然標準的 XOR/XNOR 閘只有兩個輸入，但我們可以通過級聯多個兩輸入閘來實現多輸入的 XOR/XNOR 功能。

*   **三輸入 XOR 閘 ($A \oplus B \oplus C$)：**
    *   輸出為 1 當且僅當輸入為 1 的數量是奇數。
    *   真值表：

| A | B | C | $A \oplus B \oplus C$ |
| :-: | :-: | :-: | :------------------: |
| 0 | 0 | 0 | 0                    |
| 0 | 0 | 1 | 1                    |
| 0 | 1 | 0 | 1                    |
| 0 | 1 | 1 | 0                    |
| 1 | 0 | 0 | 1                    |
| 1 | 0 | 1 | 0                    |
| 1 | 1 | 0 | 0                    |
| 1 | 1 | 1 | 1                    |

    *   應用：在數據通信中，可以作為奇偶校驗位生成器。

*   **三輸入 XNOR 閘 ($A \odot B \odot C$)：**
    *   輸出為 1 當且僅當輸入為 1 的數量是偶數 (包括 0 個 1)。
    *   這是三輸入 XOR 的反相。
    *   應用：在數據接收端，可以作為奇偶校驗檢測器。

#### 4.2 XOR/XNOR 閘作為通用閘的潛力

儘管 NAND 和 NOR 閘被稱為通用閘，能夠實現所有基本邏輯功能，但 XOR/XNOR 閘本身並非通用閘。它們不能單獨實現所有布林函數（例如，單獨的 XOR 閘無法產生常數 0 或 1）。然而，它們在算術運算和數據比較等特定領域效率極高，因此被視為數位邏輯設計中不可或缺的專用閘。

-----

### 5. 常見錯誤與澄清

*   **誤將 XOR 視為 OR：**
    *   **錯誤：** 認為 XOR 就是 OR 閘。
    *   **澄清：** XOR 和 OR 的主要區別在於當兩個輸入都為 1 時。OR 閘輸出 1，而 XOR 閘輸出 0。XOR 閘強調的是「互斥性」：只能有一個是真的。
    *   **記憶技巧：** "Either A or B, but not both."

*   **誤將 XNOR 視為 AND：**
    *   **錯誤：** 認為 XNOR 就是 AND 閘。
    *   **澄清：** XNOR 和 AND 的主要區別在於當兩個輸入都為 0 時。AND 閘輸出 0，而 XNOR 閘輸出 1。XNOR 閘強調的是「相等性」：兩個輸入必須相同。
    *   **記憶技巧：** "A is equal to B."

*   **XOR/XNOR 的邏輯符號混淆：**
    *   **錯誤：** 忘記 XOR 閘的符號有雙線弧，或 XNOR 閘在輸出端有反相圓圈。
    *   **澄清：** 仔細區分兩個符號，XOR 像一個「選拔」的 OR 閘，而 XNOR 則是在選拔後再取反。熟悉符號能避免在電路圖中產生誤解。

-----

### 6. 小練習 (附詳解)

#### 小練習 1：邏輯輸出判斷

**題目：**
給定以下輸入組，請判斷對應的 XOR 閘和 XNOR 閘的輸出：

1.  A = 0, B = 0
2.  A = 0, B = 1
3.  A = 1, B = 0
4.  A = 1, B = 1

**詳解：**

1.  **A = 0, B = 0**
    *   **XOR (A $\oplus$ B)：** 兩個輸入相同，輸出為 0。
    *   **XNOR (A $\odot$ B)：** 兩個輸入相同，輸出為 1。

2.  **A = 0, B = 1**
    *   **XOR (A $\oplus$ B)：** 兩個輸入不同，輸出為 1。
    *   **XNOR (A $\odot$ B)：** 兩個輸入不同，輸出為 0。

3.  **A = 1, B = 0**
    *   **XOR (A $\oplus$ B)：** 兩個輸入不同，輸出為 1。
    *   **XNOR (A $\odot$ B)：** 兩個輸入不同，輸出為 0。

4.  **A = 1, B = 1**
    *   **XOR (A $\oplus$ B)：** 兩個輸入相同，輸出為 0。
    *   **XNOR (A $\odot$ B)：** 兩個輸入相同，輸出為 1。

-----

#### 小練習 2：使用基本閘實現 XOR 閘

**題目：**
請使用 **AND 閘、OR 閘和 NOT 閘** 實現一個 XOR 閘。繪製其邏輯電路圖並寫出布林表達式。

**詳解：**

1.  **理解 XOR 閘的布林表達式：**
    我們知道 XOR 閘的布林表達式是 $Q = A\bar{B} + \bar{A}B$。

2.  **分解表達式所需的邏輯操作：**
    *   需要對 A 和 B 進行反相 (NOT)。
    *   需要兩個 AND 運算 ($A\bar{B}$ 和 $\bar{A}B$)。
    *   需要一個 OR 運算來組合這兩個 AND 運算的結果。

3.  **步驟：**
    *   步驟 1：使用一個 NOT 閘將 A 轉換為 $\bar{A}$。
    *   步驟 2：使用另一個 NOT 閘將 B 轉換為 $\bar{B}$。
    *   步驟 3：使用一個 AND 閘將 A 和 $\bar{B}$ 組合，得到 $A\bar{B}$。
    *   步驟 4：使用另一個 AND 閘將 $\bar{A}$ 和 B 組合，得到 $\bar{A}B$。
    *   步驟 5：使用一個 OR 閘將 $A\bar{B}$ 和 $\bar{A}B$ 組合，得到最終輸出 $Q = A\bar{B} + \bar{A}B$。

4.  **邏輯電路圖：**

    ```
              ┌───┐
          A ──┤   |      ┌───┐
              |   |──────┤ & |──┐
          B ─o──┤   |      └───┘  │
              └───┘             │
                │               │
                │             ┌─▽─┐
                │             │ ≧1│────── Q (A XOR B)
                │             └─△─┘
                │               │
              ┌───┐             │
          B ──┤   |      ┌───┐  │
              |   |──────┤ & ├──┘
          A ─o──┤   |      └───┘
              └───┘
    ```
    (注意：這裡的圖示是簡化的ASCII藝術，實際繪製時，NOT閘通常表示為三角形帶圓圈，AND閘為D形，OR閘為月牙形。)

-----

### 7. 延伸閱讀/參考

*   **布林代數簡介：** 深入了解布林代數的基本定律和定理，這將有助於更有效地分析和簡化邏輯電路。
*   **數位邏輯設計 (Digital Logic Design)：** 學習如何使用邏輯閘設計組合邏輯電路和序列邏輯電路，例如計數器、暫存器等。
*   **半加器與全加器 (Half Adder and Full Adder)：** 探討如何利用 XOR 閘和基本閘構建二進制加法電路，這是理解電腦算術邏輯單元 (ALU) 的基礎。
*   **數據通信中的錯誤檢測與糾正碼：** 了解 XOR 閘在奇偶校驗、CRC (循環冗餘校驗) 等錯誤檢測機制中的應用。